{"version":3,"sources":["pollyfill.js","utilityFunctions.js","http.js","urlUtils.js","ads/vpaid/VPAIDAdUnitWrapper.js","ads/vpaid/VPAIDFlashTech.js","ads/vpaid/VPAIDHTML5Tech.js","ads/vpaid/VPAIDIntegrator.js","ads/vast/client/Ad.js","ads/vast/client/Creative.js","ads/vast/client/Inline.js","ads/vast/client/Linear.js","ads/vast/client/MediaFile.js","ads/vast/client/TrackingEvent.js","ads/vast/client/VASTClient.js","ads/vast/client/VASTError.js","ads/vast/client/VASTIntegrator.js","ads/vast/client/VASTTracker.js","ads/vast/client/VideoClicks.js","ads/vast/client/Wrapper.js","async.js","dom.js","playerUtils.js","xml.js","ads/videojs.vast.js","ads/components/ads-label.js","ads/components/black-poster.js","ads/vast/client/VASTResponse.js","ads/vast/client/vastUtil.js"],"names":["window","document","vjs","undefined","noop","isNull","o","isDefined","isObject","obj","isFunction","str","isNumber","num","isArray","array","Object","prototype","toString","call","isString","isEmptyString","length","isNotEmptyString","arrayLikeObjToArray","args","Array","slice","forEach","iterator","context","key","hasOwnProperty","isPrimitive","extend","arg","i","k","arguments","capitalize","s","charAt","toUpperCase","decapitalize","toLowerCase","transformArray","transformer","transformedArray","item","index","transformedItem","push","toFixedDigits","digits","formattedNum","parseInt","isNaN","NaN","throttle","callback","delay","previousCall","Date","getTime","time","apply","this","echoFn","val","isISO8601","value","iso8086Regex","test","trim","isIDevice","_UA","HttpRequestError","message","HttpRequest","createXhr","xhr","XMLHttpRequest","XDomainRequest","urlParts","url","href","msie","urlParsingNode","setAttribute","protocol","replace","host","search","hash","hostname","port","pathname","VPAIDAdUnitWrapper","vpaidAdUnit","opts","sanityCheck","adUnit","checkVPAIDInterface","VASTError","defaultOpts","responseTimeout","options","_adUnit","VPAIDFlashTech","mediaFile","settings","src","name","containerEl","vpaidFlashClient","VPAIDHTML5Tech","INVALID_MEDIA_FILE","videoEl","vpaidHTMLClient","VPAIDIntegrator","player","createVPAIDContainerEl","createElement","dom","addClass","el","insertBefore","controlBar","VIEW_MODE","NORMAL","FULLSCREEN","THUMBNAIL","VPAID_VERSION","full","major","minor","resizeAd","dimension","getDimension","MODE","isFullscreen","width","height","logError","error","console","log","Ad","adJTree","id","attr","sequence","inLine","InLine","wrapper","Wrapper","Creative","creativeJTree","adId","apiFramework","linear","Linear","inlineJTree","parseSurveys","inlineSurveys","survey","keyValue","uri","type","adTitle","xml","adSystem","impressions","vastUtil","parseImpressions","impression","creatives","parseCreatives","description","advertiser","surveys","pricing","extensions","linearJTree","parseTrackingEvents","trackingEvents","duration","trackings","trackingData","TrackingEvent","parseMediaFiles","mediaFilesJxonTree","mediaFiles","mfData","MediaFile","parseDuration","tracking","skipoffset","parseOffset","videoClicks","VideoClicks","adParameters","decode","mediaFileJTree","delivery","codec","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","trackingJTree","offset","VASTClient","defaultOptions","WRAPPER_LIMIT","errorURLMacros","code","VASTIntegrator","VASTTracker","assetURI","vastResponse","VASTResponse","response","progress","quartiles","firstQuartile","Math","round","midpoint","thirdQuartile","videoClickJTree","parseClickTrackings","clickTrackings","clickTrackingData","clickThrough","clickTracking","customClicks","customClick","wrapperJTree","VASTAdTagURI","vASTAdTagURI","followAdditionalWrappers","allowMultipleAds","fallbackOnNoAd","parseNum","navigator","userAgent","async","setImmediate","fn","setTimeout","tasks","makeCallback","next","waterfall","err","Error","wrapIterator","when","condition","isAllowed","pop","unshift","isVisible","style","getComputedStyle","visibility","isHidden","display","isShown","hide","__prev_style_display_","show","hasClass","cssClass","classes","len","classList","contains","getAttribute","split","add","join","removeClass","remove","newClasses","addEventListener","handler","e","t","attachEvent","removeEventListener","detachEvent","dispatchEvent","event","fireEvent","eventType","isDescendant","parent","child","node","parentNode","getTextContent","textContent","text","prependChild","removeChild","firstChild","isDomElement","Element","click","once","handlerWrap","element","rect","getBoundingClientRect","offsetWidth","offsetHeight","run","method","setHeaders","headers","setRequestHeader","requestError","timeout","timeoutId","open","withCredentials","onload","statusText","status","clearTimeout","responseText","getAllResponseHeaders","onerror","onabort","send","abort","get","processResponse","headersString","isSuccess","http","playerUtils","getPlayerSnapshot","getSuppressedTracks","tracks","remoteTextTracks","tracks_","suppressedTracks","track","mode","tech","querySelector","snapshot","ended","currentSrc","currentTime","currentType","playing","paused","nativePoster","poster","restorePlayerSnapshot","hasSrcChanged","restoreTracks","trackSnapshot","tryToResume","resume","play","isReadyToResume","attempts","videojs","warn","one","load","readyState","seekable","isIPhone","iPhone","prepareForAds","tryToTriggerFirstPlay","isFirstPlay","firstPlay","trigger","resetFirstPlay","blackPoster","saveVolumeSnapshot","muted","volume","restorePlayerToFirstPlay","restoreVolumeSnapshot","volumeSnapshot","hideBlackPoster","addStyles","removeStyles","addChild","origPlay","on","removeNativePoster","removeAttribute","only","events","listener","off","documentMode","strToXMLDoc","stringContainingXMLSource","parseString","parsedDocument","parser","DOMParser","parseFromString","isParseError","errorneousParse","parsererrorNS","getElementsByTagName","namespaceURI","getElementsByTagNameNS","xmlDocument","ActiveXObject","loadXML","parseText","sValue","isFinite","parseFloat","JXONTree","oXMLParent","documentElement","hasChildNodes","oNode","sProp","vContent","sCollectedTxt","nItem","childNodes","nodeType","nodeValue","prefix","nodeName","constructor","hasAttributes","oAttrib","nAttrib","attributes","toJXONTree","xmlString","xmlDoc","xmlObj","encode","plugin","tryToPlayPrerollAd","checkAdsEnabled","adsEnabled","preparePlayerForAd","canPlayPrerollAd","pause","addSpinnerIcon","startAdCancelTimeout","triggerContentEvents","iosPrerollCancelTimeout","clearAdCancelTimeout","adCancelTimeoutId","adsCanceled","trackAdError","adCancelTimeout","removeSpinnerIcon","playPrerollAd","vast","cancelAds","getVastResponse","playAd","getVASTResponse","adAdsLabel","adFinished","removeAdsLabel","preventManualProgress","adTimeupdateHandler","progressDelta","abs","previousTime","PROGRESS_THRESHOLD","skipad_attempts","stopPreventManualProgress","adIntegrator","isVPAID","playAdAlways","autoResize","vpaidFlashLoaderPath","isEnabled","enable","disable","AdsLabel","Component","init","that","currentTimeComp","getChild","createEl","className","innerHTML","BlackPoster","posterImg","bind","VPAIDAdUnit","canSubscribeToEvents","subscribe","canUnsubscribeFromEvents","unsubscribe","VPAIDInterfaceMethods","adUnitAsyncCall","cb","wrapCallback","shift","evtName","waitForEvent","responseListener","handshakeVersion","version","initAd","viewMode","desiredBitrate","adUnitData","startAd","stopAd","pauseAd","resumeAd","expandAd","collapseAd","skipAd","property","getterName","setAdVolume","supports","loadAdUnit","objectEl","container","flashClientOpts","data","VPAIDFLASHClient","unloadAdUnit","destroy","video","INVALID_DOM_CONTAINER_EL","tagName","MISSING_CALLBACK","VPAIDHTML5Client","PREFIX","INVALID_DOM_VIDEO_EL","techs","removeAdUnit","_trackError","_findSupportedTech","_loadAdUnit","_playAdUnit","_finishPlaying","findSupportedTech","mediafile","VPAIDTech","vpaidMediaFiles","filter","vjsTechEl","WrappedAdUnit","techClass","_handshake","_initAd","_setupEvents","_addSkipButton","_linkPlayerControls","_startAd","isSupportedVersion","majorNum","parts","pauseAdUnit","resumeAdUnit","adUnitSrc","tracker","trackSkip","trackImpressions","trackStart","trackFirstQuartile","trackMidpoint","trackThirdQuartile","trackComplete","generateClickThroughURL","clickThroughMacro","variables","ASSETURI","CONTENTPLAYHEAD","parseURLMacro","playerHandles","clickThruUrl","trackClick","trackAcceptInvitation","trackAcceptInvitationLinear","trackClose","trackCloseLinear","trackPause","trackCollapse","trackErrorWithCode","trackResume","lastVolume","getAdVolume","currentVolume","trackMute","trackUnmute","updateViewSize","updateViewSizeThrottled","updateSkipButtonState","getAdSkippableState","isSkippable","addSkipButton","removeSkipButton","skipButton","createSkipButton","appendChild","onclick","Event","stopPropagation","linkVolumeControl","updateAdUnitVolume","vol","updatePlayerVolume","linkFullScreenControl","ERRORCODE","buildVASTResponse","adsChain","_buildVASTResponse","_getAd","_sendVASTResponse","ads","requestVASTXml","_requestVASTXml","buildAd","adXML","getValidAd","possibleAds","previousAds","getAd","adChain","adTree","ad","_buildAd","getNextAd","concat","_buildVastTree","xmlStr","vastTree","vastVersion","adJxonTree","addErrorUrlMacros","validateAd","addAdsToResponse","addAd","validateResponse","progressEvents","hasLinear","_selectAdSource","_createVASTTracker","_addClickThrough","_playSelectedAd","source","playerWidth","sort","a","b","deltaA","deltaB","selectSource","adMediaFile","unbindEvents","trackFullscreenChange","trackProgress","trackVolumeChange","trackFullscreen","trackExitFullscreen","currentTimeInMs","previouslyMuted","addSkipButtonToPlayer","skipOffset","updateSkipButton","timeLeft","ceil","skipOffsetInSec","createClickThroughBlocker","blocker","target","updateBlockerURL","formatProgress","removeBlocker","updateBlocker","finishPlayingAd","handlePlayerError","_linearAdded","appendToArray","items","_addInLine","_addWrapper","_addErrorTrackUrl","errorURL","_addImpressions","_addClickTrackings","_addCustomClicks","_addTrackingEvents","eventsMap","trackingEvent","_addTitle","title","_addDuration","_addVideoClicks","_addMediaFiles","_addSkipoffset","_addAdParameters","_addLinear","creative","trackURLs","urls","trackEvent","eventName","trackOnce","getEventUris","uris","newProgress","addTrackEvent","canBeAdded","addQuartileEvents","quartileTime","ONCE","addProgressEvent","progressEvent","trackEvents","ALWAYS","errorcode","URLMacros","sources","parseURLMacros","trackImgs","img","Image","parsedURLs","random","URLMacro","_parseURLMacro","RegExp","durationStr","parseHoursToMs","hourStr","parseMinToMs","minStr","parseSecToMs","secStr","match","durationInMs","durationRegex","creativesJTree","creativesData","hours","minutes","seconds","milliseconds","floor","isPercentage","percentageRegex","calculatePercentage","percentStr","calcPercent","quantity","percent"],"mappings":"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","file":"videojs-vast-vpaid.min.js","sourcesContent":["/**\n There is a bug on android 4.2 ont the way it parses string\n The code bellow fixes the problem if there is a problem\n */\n(function () {\n var parseNum;\n if(parseInt('09') !== 9) {\n  parseNum = window.parseInt;\n  window.parseInt = function(str) {\n   if(typeof str === 'string' && !/^(\\s+)?0+(\\s+)?$/.test(str)){\n    //We remove the 0 from the left of the number\n    return parseNum(str.replace(/^0+/, ''));\n   }\n\n   return parseNum(str);\n  };\n }\n})();","/*jshint unused:false */\n\"use strict\";\n\nvar NODE_TYPE_ELEMENT = 1;\n\nfunction noop(){ }\n\nfunction isNull(o) {\n  return o === null;\n}\n\nfunction isDefined(o){\n  return o !== undefined;\n}\n\nfunction isUndefined(o){\n  return o === undefined;\n}\n\nfunction isObject(obj) {\n  return typeof obj === 'object';\n}\n\nfunction isFunction(str){\n  return typeof str === 'function';\n}\n\nfunction isNumber(num){\n  return typeof num === 'number';\n}\n\nfunction isWindow(obj) {\n  return isObject(obj) && obj.window === obj;\n}\n\nfunction isArray(array){\n  return Object.prototype.toString.call( array ) === '[object Array]';\n}\n\nfunction isArrayLike(obj) {\n  if (obj === null || isWindow(obj) || isFunction(obj) || isUndefined(obj)) {\n    return false;\n  }\n\n  var length = obj.length;\n\n  if (obj.nodeType === NODE_TYPE_ELEMENT && length) {\n    return true;\n  }\n\n  return isString(obj) || isArray(obj) || length === 0 ||\n    typeof length === 'number' && length > 0 && (length - 1) in obj;\n}\n\nfunction isString(str){\n  return typeof str === 'string';\n}\n\nfunction isEmptyString(str) {\n  return isString(str) && str.length === 0;\n}\n\nfunction isNotEmptyString(str) {\n  return isString(str) && str.length !== 0;\n}\n\nfunction arrayLikeObjToArray(args) {\n  return Array.prototype.slice.call(args);\n}\n\nfunction forEach(obj, iterator, context) {\n  var key, length;\n  if (obj) {\n    if (isFunction(obj)) {\n      for (key in obj) {\n        // Need to check if hasOwnProperty exists,\n        // as on IE8 the result of querySelectorAll is an object without a hasOwnProperty function\n        if (key !== 'prototype' && key !== 'length' && key !== 'name' && (!obj.hasOwnProperty || obj.hasOwnProperty(key))) {\n          iterator.call(context, obj[key], key, obj);\n        }\n      }\n    } else if (isArray(obj)) {\n      var isPrimitive = typeof obj !== 'object';\n      for (key = 0, length = obj.length; key < length; key++) {\n        if (isPrimitive || key in obj) {\n          iterator.call(context, obj[key], key, obj);\n        }\n      }\n    } else if (obj.forEach && obj.forEach !== forEach) {\n      obj.forEach(iterator, context, obj);\n    } else {\n      for (key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          iterator.call(context, obj[key], key, obj);\n        }\n      }\n    }\n  }\n  return obj;\n}\n\nvar SNAKE_CASE_REGEXP = /[A-Z]/g;\nfunction snake_case(name, separator) {\n  separator = separator || '_';\n  return name.replace(SNAKE_CASE_REGEXP, function(letter, pos) {\n    return (pos ? separator : '') + letter.toLowerCase();\n  });\n}\n\nfunction isValidEmail(email){\n  if(!isString(email)){\n    return false;\n  }\n  var EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i;\n  return EMAIL_REGEXP.test(email.trim());\n}\n\nfunction extend (obj) {\n  var arg, i, k;\n  for (i = 1; i < arguments.length; i++) {\n    arg = arguments[i];\n    for (k in arg) {\n      if (arg.hasOwnProperty(k)) {\n        if(isObject(obj[k]) && !isNull(obj[k]) && isObject(arg[k])){\n          obj[k] = extend({}, obj[k], arg[k]);\n        }else {\n          obj[k] = arg[k];\n        }\n      }\n    }\n  }\n  return obj;\n}\n\nfunction capitalize(s){\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\n\nfunction decapitalize(s) {\n  return s.charAt(0).toLowerCase() + s.slice(1);\n}\n\n/**\n * This method works the same way array.prototype.map works but if the transformer returns undefine, then\n * it won't be added to the transformed Array.\n */\nfunction transformArray(array, transformer) {\n  var transformedArray = [];\n\n  array.forEach(function(item, index){\n    var transformedItem = transformer(item, index);\n    if(isDefined(transformedItem)) {\n      transformedArray.push(transformedItem);\n    }\n  });\n\n  return transformedArray;\n}\n\nfunction toFixedDigits(num, digits) {\n  var formattedNum = num + '';\n  digits = isNumber(digits) ? digits : 0;\n  num = isNumber(num) ? num : parseInt(num);\n  if(isNumber(num) && !isNaN(num)){\n    formattedNum = num + '';\n    while(formattedNum.length < digits) {\n      formattedNum = '0' + formattedNum;\n    }\n    return formattedNum;\n  }\n  return NaN + '';\n}\n\nfunction throttle(callback, delay) {\n  var previousCall = new Date().getTime() - (delay + 1);\n  return function() {\n    var time = new Date().getTime();\n    if ((time - previousCall) >= delay) {\n      previousCall = time;\n      callback.apply(this, arguments);\n    }\n  };\n}\n\nfunction debounce (callback, wait) {\n  var timeoutId;\n\n  return function (){\n    if(timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(function(){\n      callback.apply(this, arguments);\n      timeoutId = undefined;\n    }, wait);\n  };\n}\n\n// a function designed to blow up the stack in a naive way\n// but it is ok for videoJs children components\nfunction treeSearch(root, getChildren, found){\n  var children = getChildren(root);\n  for (var i = 0; i < children.length; i++){\n    if (found(children[i])) {\n      return children[i];\n    }\n    else {\n      var el = treeSearch(children[i], getChildren, found);\n      if (el){\n        return el;\n      }\n    }\n  }\n}\n\nfunction echoFn(val) {\n  return function () {\n    return val;\n  };\n}\n\n//Note: Supported formats come from http://www.w3.org/TR/NOTE-datetime\n// and the iso8601 regex comes from http://www.pelagodesign.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/\nfunction isISO8601(value) {\n  if(isNumber(value)){\n    value = value + '';  //we make sure that we are working with strings\n  }\n\n  if(!isString(value)){\n    return false;\n  }\n\n  /*jslint maxlen: 500 */\n  var iso8086Regex = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n  return iso8086Regex.test(value.trim());\n}\n\nvar _UA = navigator.userAgent;\nfunction isIDevice() {\n  return /iP(hone|ad)/.test(_UA);\n}","\"use strict\";\n\nfunction HttpRequestError(message) {\n  this.message = 'HttpRequest Error: ' + (message || '');\n}\nHttpRequestError.prototype = new Error();\nHttpRequestError.prototype.name = \"HttpRequest Error\";\n\nfunction HttpRequest(createXhr) {\n  if (!isFunction(createXhr)) {\n    throw new HttpRequestError('Missing XMLHttpRequest factory method');\n  }\n\n  this.createXhr = createXhr;\n}\n\nHttpRequest.prototype.run = function (method, url, callback, options) {\n  sanityCheck(url, callback, options);\n  var timeout, timeoutId;\n  var xhr = this.createXhr();\n  options = options || {};\n  timeout = isNumber(options.timeout)? options.timeout : 0;\n\n  xhr.open(method, urlParts(url).href, true);\n\n  if (options.headers) {\n    setHeaders(xhr, options.headers);\n  }\n\n  if (options.withCredentials) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.onload = function () {\n    var statusText, response, status;\n\n    if(isDefined(timeoutId)){\n      clearTimeout(timeoutId);\n      timeoutId = undefined;\n    }\n\n    statusText = xhr.statusText || '';\n\n    // responseText is the old-school way of retrieving response (supported by IE8 & 9)\n    // response/responseType properties were introduced in XHR Level2 spec (supported by IE10)\n    response = ('response' in xhr) ? xhr.response : xhr.responseText;\n\n    // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\n    status = xhr.status === 1223 ? 204 : xhr.status;\n\n    callback(\n      status,\n      response,\n      xhr.getAllResponseHeaders(),\n      statusText);\n  };\n\n  xhr.onerror = requestError;\n  xhr.onabort = requestError;\n\n  xhr.send();\n\n  if(timeout > 0){\n    timeoutId = setTimeout(function () {\n      xhr && xhr.abort();\n    }, timeout);\n  }\n\n  function sanityCheck(url, callback, options) {\n    if (!isString(url) || isEmptyString(url)) {\n      throw new HttpRequestError(\"Invalid url '\" + url + \"'\");\n    }\n\n    if (!isFunction(callback)) {\n      throw new HttpRequestError(\"Invalid handler '\" + callback + \"' for the http request\");\n    }\n\n    if (isDefined(options) && !isObject(options)) {\n      throw new HttpRequestError(\"Invalid options map '\" + options + \"'\");\n    }\n  }\n\n  function setHeaders(xhr, headers) {\n    forEach(headers, function (value, key) {\n      if (isDefined(value)) {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n  }\n\n  function requestError() {\n    callback(-1, null, null, '');\n  }\n};\n\nHttpRequest.prototype.get = function (url, callback, options) {\n  this.run('GET', url, processResponse, options);\n\n  function processResponse(status, response, headersString, statusText) {\n    if (isSuccess(status)) {\n      callback(null, response, status, headersString, statusText);\n    } else {\n      callback(new HttpRequestError(statusText), response, status, headersString, statusText);\n    }\n  }\n\n  function isSuccess(status) {\n    return 200 <= status && status < 300;\n  }\n};\n\nfunction createXhr() {\n  var xhr = new XMLHttpRequest();\n  if (!(\"withCredentials\" in xhr)) {\n    // XDomainRequest for IE.\n    xhr = new XDomainRequest();\n  }\n  return xhr;\n}\n\nvar http = new HttpRequest(createXhr);\n","'use strict';\n\n/**\n * documentMode is an IE-only property\n * http://msdn.microsoft.com/en-us/library/ie/cc196988(v=vs.85).aspx\n */\nvar msie = document.documentMode;\n\n/**\n *\n * IMPORTANT NOTE: This function comes from angularJs and was originally called urlResolve\n *                 you can take a look at the original code here https://github.com/angular/angular.js/blob/master/src/ng/urlUtils.js\n *\n * Implementation Notes for non-IE browsers\n * ----------------------------------------\n * Assigning a URL to the href property of an anchor DOM node, even one attached to the DOM,\n * results both in the normalizing and parsing of the URL.  Normalizing means that a relative\n * URL will be resolved into an absolute URL in the context of the application document.\n * Parsing means that the anchor node's host, hostname, protocol, port, pathname and related\n * properties are all populated to reflect the normalized URL.  This approach has wide\n * compatibility - Safari 1+, Mozilla 1+, Opera 7+,e etc.  See\n * http://www.aptana.com/reference/html/api/HTMLAnchorElement.html\n *\n * Implementation Notes for IE\n * ---------------------------\n * IE >= 8 and <= 10 normalizes the URL when assigned to the anchor node similar to the other\n * browsers.  However, the parsed components will not be set if the URL assigned did not specify\n * them.  (e.g. if you assign a.href = \"foo\", then a.protocol, a.host, etc. will be empty.)  We\n * work around that by performing the parsing in a 2nd step by taking a previously normalized\n * URL (e.g. by assigning to a.href) and assigning it a.href again.  This correctly populates the\n * properties such as protocol, hostname, port, etc.\n *\n * IE7 does not normalize the URL when assigned to an anchor node.  (Apparently, it does, if one\n * uses the inner HTML approach to assign the URL as part of an HTML snippet -\n * http://stackoverflow.com/a/472729)  However, setting img[src] does normalize the URL.\n * Unfortunately, setting img[src] to something like \"javascript:foo\" on IE throws an exception.\n * Since the primary usage for normalizing URLs is to sanitize such URLs, we can't use that\n * method and IE < 8 is unsupported.\n *\n * References:\n *   http://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n *   http://www.aptana.com/reference/html/api/HTMLAnchorElement.html\n *   http://url.spec.whatwg.org/#urlutils\n *   https://github.com/angular/angular.js/pull/2902\n *   http://james.padolsey.com/javascript/parsing-urls-with-the-dom/\n *\n * @kind function\n * @param {string} url The URL to be parsed.\n * @description Normalizes and parses a URL.\n * @returns {object} Returns the normalized URL as a dictionary.\n *\n *   | member name   | Description    |\n *   |---------------|----------------|\n *   | href          | A normalized version of the provided URL if it was not an absolute URL |\n *   | protocol      | The protocol including the trailing colon                              |\n *   | host          | The host and port (if the port is non-default) of the normalizedUrl    |\n *   | search        | The search params, minus the question mark                             |\n *   | hash          | The hash string, minus the hash symbol\n *   | hostname      | The hostname\n *   | port          | The port, without \":\"\n *   | pathname      | The pathname, beginning with \"/\"\n *\n */\n\nvar urlParsingNode = document.createElement(\"a\");\n\nfunction urlParts(url) {\n  var href = url;\n\n  if (msie) {\n    // Normalize before parse.  Refer Implementation Notes on why this is\n    // done in two steps on IE.\n    urlParsingNode.setAttribute(\"href\", href);\n    href = urlParsingNode.href;\n  }\n\n  urlParsingNode.setAttribute('href', href);\n\n  // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n  return {\n    href: urlParsingNode.href,\n    protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n    host: urlParsingNode.host,\n    search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n    hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n    hostname: urlParsingNode.hostname,\n    port: isNotEmptyString(urlParsingNode.port)? urlParsingNode.port: 80,\n    pathname: (urlParsingNode.pathname.charAt(0) === '/')\n      ? urlParsingNode.pathname\n      : '/' + urlParsingNode.pathname\n  };\n}\n\n\n/**\n * This function accepts a query string (search part of a url) and returns a dictionary with\n * the different key value pairs\n * @param {string} qs queryString\n */\nfunction queryStringToObj(qs, cond) {\n  var pairs, qsObj;\n\n  cond = isFunction(cond)? cond : function() {\n    return true;\n  };\n\n  qs = qs.trim().replace(/^\\?/, '');\n  pairs = qs.split('&');\n  qsObj = {};\n\n  forEach(pairs, function (pair) {\n    var keyValue, key, value;\n    if (pair !== '') {\n      keyValue = pair.split('=');\n      key = keyValue[0];\n      value = keyValue[1];\n      if(cond(key, value)){\n        qsObj[key] = value;\n      }\n    }\n  });\n\n  return qsObj;\n}\n\n/**\n * This function accepts an object and serializes it into a query string without the leading '?'\n * @param obj\n * @returns {string}\n */\nfunction objToQueryString(obj) {\n  var pairs = [];\n  forEach(obj, function (value, key) {\n    pairs.push(key + '=' + value);\n  });\n  return pairs.join('&');\n}\n\n","function VPAIDAdUnitWrapper(vpaidAdUnit, opts) {\n  if (!(this instanceof VPAIDAdUnitWrapper)) {\n    return new VPAIDAdUnitWrapper(vpaidAdUnit);\n  }\n  sanityCheck(vpaidAdUnit, opts);\n  var defaultOpts = {\n    responseTimeout: 5000\n  };\n\n  this.options = extend({}, defaultOpts, opts || {});\n  this._adUnit = vpaidAdUnit;\n\n  /*** Local Functions ***/\n  function sanityCheck(adUnit, opts) {\n    if (!adUnit || !VPAIDAdUnitWrapper.checkVPAIDInterface(adUnit)) {\n      throw new VASTError('on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface');\n    }\n\n    if (opts && !isObject(opts)) {\n      throw new VASTError(\"on VPAIDAdUnitWrapper, expected options hash  but got '\" + opts + \"'\");\n    }\n  }\n}\n\nVPAIDAdUnitWrapper.checkVPAIDInterface = function checkVPAIDInterface(VPAIDAdUnit) {\n  //NOTE: skipAd is not part of the method list because it only appears in VPAID 2.0 and we support VPAID 1.0\n  var VPAIDInterfaceMethods = [\n    'handshakeVersion', 'initAd', 'startAd', 'stopAd', 'resizeAd', 'pauseAd', 'expandAd', 'collapseAd'\n  ];\n\n  for (var i = 0, len = VPAIDInterfaceMethods.length; i < len; i++) {\n    if (!VPAIDAdUnit || !isFunction(VPAIDAdUnit[VPAIDInterfaceMethods[i]])) {\n      return false;\n    }\n  }\n\n\n  return canSubscribeToEvents(VPAIDAdUnit) && canUnsubscribeFromEvents(VPAIDAdUnit);\n\n  /*** Local Functions ***/\n\n  function canSubscribeToEvents(adUnit) {\n    return isFunction(adUnit.subscribe) || isFunction(adUnit.addEventListener) || isFunction(adUnit.on);\n  }\n\n  function canUnsubscribeFromEvents(adUnit) {\n    return isFunction(adUnit.unsubscribe) || isFunction(adUnit.removeEventListener) || isFunction(adUnit.off);\n\n  }\n};\n\nVPAIDAdUnitWrapper.prototype.adUnitAsyncCall = function () {\n  var args = arrayLikeObjToArray(arguments);\n  var method = args.shift();\n  var cb = args.pop();\n  var timeoutId;\n\n  sanityCheck(method, cb, this._adUnit);\n  args.push(wrapCallback());\n\n  this._adUnit[method].apply(this._adUnit, args);\n  timeoutId = setTimeout(function () {\n    timeoutId = null;\n    cb(new VASTError(\"on VPAIDAdUnitWrapper, timeout while waiting for a response on call '\" + method + \"'\"));\n    cb = noop;\n  }, this.options.responseTimeout);\n\n  /*** Local functions ***/\n  function sanityCheck(method, cb, adUnit) {\n    if (!isString(method) || !isFunction(adUnit[method])) {\n      throw new VASTError(\"on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name\");\n    }\n\n    if (!isFunction(cb)) {\n      throw new VASTError(\"on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback\");\n    }\n  }\n\n  function wrapCallback() {\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      cb.apply(this, arguments);\n    };\n  }\n};\n\nVPAIDAdUnitWrapper.prototype.on = function (evtName, handler) {\n  var addEventListener = this._adUnit.addEventListener || this._adUnit.subscribe || this._adUnit.on;\n  addEventListener.call(this._adUnit, evtName, handler);\n};\n\nVPAIDAdUnitWrapper.prototype.off = function (evtName, handler) {\n  var removeEventListener = this._adUnit.removeEventListener || this._adUnit.unsubscribe || this._adUnit.off;\n  removeEventListener.call(this._adUnit, evtName, handler);\n};\n\nVPAIDAdUnitWrapper.prototype.waitForEvent = function (evtName, cb, context) {\n  var timeoutId;\n  sanityCheck(evtName, cb);\n  context = context || null;\n\n  this.on(evtName, responseListener);\n\n  timeoutId = setTimeout(function () {\n    cb(new VASTError(\"on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '\" + evtName + \"'\"));\n    timeoutId = null;\n    cb = noop;\n  }, this.options.responseTimeout);\n\n  /*** Local functions ***/\n  function sanityCheck(evtName, cb) {\n    if (!isString(evtName)) {\n      throw new VASTError(\"on VPAIDAdUnitWrapper.waitForEvent, missing evt name\");\n    }\n\n    if (!isFunction(cb)) {\n      throw new VASTError(\"on VPAIDAdUnitWrapper.waitForEvent, missing callback\");\n    }\n  }\n\n  function responseListener() {\n    var args = arrayLikeObjToArray(arguments);\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n\n    args.unshift(null);\n    cb.apply(context, args);\n  }\n};\n\n// VPAID METHODS\nVPAIDAdUnitWrapper.prototype.handshakeVersion = function (version, cb) {\n  this.adUnitAsyncCall('handshakeVersion', version, cb);\n};\n\n/* jshint maxparams:6 */\nVPAIDAdUnitWrapper.prototype.initAd = function (width, height, viewMode, desiredBitrate, adUnitData, cb) {\n  this.waitForEvent('AdLoaded', cb);\n  this._adUnit.initAd(width, height, viewMode, desiredBitrate, adUnitData);\n};\n\nVPAIDAdUnitWrapper.prototype.resizeAd = function (width, height, viewMode, cb) {\n  // NOTE: AdSizeChange event is only supported on VPAID 2.0 so for the moment we are not going to use it\n  // and will assume that everything is fine after the async call\n  this.adUnitAsyncCall('resizeAd', width, height, viewMode, cb);\n};\n\nVPAIDAdUnitWrapper.prototype.startAd = function (cb) {\n  this.waitForEvent('AdStarted', cb);\n  this._adUnit.startAd();\n};\n\nVPAIDAdUnitWrapper.prototype.stopAd = function (cb) {\n  this.waitForEvent('AdStopped', cb);\n  this._adUnit.stopAd();\n};\n\nVPAIDAdUnitWrapper.prototype.pauseAd = function (cb) {\n  this.waitForEvent('AdPaused', cb);\n  this._adUnit.pauseAd();\n};\n\nVPAIDAdUnitWrapper.prototype.resumeAd = function (cb) {\n  this.waitForEvent('AdPlaying', cb);\n  this._adUnit.resumeAd();\n};\n\nVPAIDAdUnitWrapper.prototype.expandAd = function (cb) {\n  this.waitForEvent('AdExpandedChange', cb);\n  this._adUnit.expandAd();\n};\n\nVPAIDAdUnitWrapper.prototype.collapseAd = function (cb) {\n  this.waitForEvent('AdExpandedChange', cb);\n  this._adUnit.collapseAd();\n};\n\nVPAIDAdUnitWrapper.prototype.skipAd = function (cb) {\n  this.waitForEvent('AdSkipped', cb);\n  this._adUnit.skipAd();\n};\n\n//VPAID property getters\n[\n  'adLinear',\n  'adWidth',\n  'adHeight',\n  'adExpanded',\n  'adSkippableState',\n  'adRemainingTime',\n  'adDuration',\n  'adVolume',\n  'adCompanions',\n  'adIcons'\n].forEach(function (property) {\n  var getterName = 'get' + capitalize(property);\n\n  VPAIDAdUnitWrapper.prototype[getterName] = function (cb) {\n    this.adUnitAsyncCall(getterName, cb);\n  };\n});\n\n//VPAID property setters\nVPAIDAdUnitWrapper.prototype.setAdVolume = function(volume, cb){\n  this.adUnitAsyncCall('setAdVolume',volume, cb);\n};\n","function VPAIDFlashTech(mediaFile, settings) {\n  if (!(this instanceof VPAIDFlashTech)) {\n    return new VPAIDFlashTech(mediaFile);\n  }\n  sanityCheck(mediaFile);\n  this.name = 'vpaid-flash';\n  this.mediaFile = mediaFile;\n  this.containerEl = null;\n  this.vpaidFlashClient = null;\n  this.settings = settings;\n\n  /*** local functions ***/\n  function sanityCheck(mediaFile) {\n    if (!mediaFile || !isString(mediaFile.src)) {\n      throw new VASTError('on VPAIDFlashTech, invalid MediaFile');\n    }\n  }\n}\n\nVPAIDFlashTech.supports = function (type) {\n  return type === 'application/x-shockwave-flash';\n};\n\nVPAIDFlashTech.prototype.loadAdUnit = function loadFlashCreative(containerEl, objectEl, callback) {\n  var that = this;\n  var flashClientOpts = this.settings && this.settings.vpaidFlashLoaderPath ? {data: this.settings.vpaidFlashLoaderPath} : undefined;\n  sanityCheck(containerEl, callback);\n\n  this.containerEl = containerEl;\n  this.vpaidFlashClient = new VPAIDFLASHClient(containerEl, function (error) {\n    if (error) {\n      return callback(error);\n    }\n\n    that.vpaidFlashClient.loadAdUnit(that.mediaFile.src, callback);\n  }, flashClientOpts);\n\n  /*** Local Functions ***/\n  function sanityCheck(container, cb) {\n\n    if (!dom.isDomElement(container)) {\n      throw new VASTError('on VPAIDFlashTech.loadAdUnit, invalid dom container element');\n    }\n\n    if (!isFunction(cb)) {\n      throw new VASTError('on VPAIDFlashTech.loadAdUnit, missing valid callback');\n    }\n  }\n};\n\nVPAIDFlashTech.prototype.unloadAdUnit = function () {\n  if (this.vpaidFlashClient) {\n    try{\n      this.vpaidFlashClient.destroy();\n    } catch(e){\n      if(console && isFunction(console.log)){\n        console.log('VAST ERROR: trying to unload the VPAID adunit');\n      }\n    }\n    this.vpaidFlashClient = null;\n  }\n\n  if (this.containerEl) {\n    dom.remove(this.containerEl);\n    this.containerEl = null;\n  }\n};\n","function VPAIDHTML5Tech(mediaFile) {\n\n  if(!(this instanceof VPAIDHTML5Tech)) {\n    return new VPAIDHTML5Tech(mediaFile);\n  }\n\n  sanityCheck(mediaFile);\n\n  this.name = 'vpaid-html5';\n  this.containerEl = null;\n  this.videoEl = null;\n  this.vpaidHTMLClient = null;\n\n  this.mediaFile = mediaFile;\n\n  function sanityCheck(mediaFile) {\n      if (!mediaFile || !isString(mediaFile.src)) {\n        throw new VASTError(VPAIDHTML5Tech.INVALID_MEDIA_FILE);\n      }\n  }\n}\n\nVPAIDHTML5Tech.supports = function (type) {\n  return type === 'application/javascript';\n};\n\nVPAIDHTML5Tech.prototype.loadAdUnit = function loadAdUnit(containerEl, videoEl, callback) {\n  sanityCheck(containerEl, videoEl, callback);\n\n  this.containerEl = containerEl;\n  this.videoEl = videoEl;\n  this.vpaidHTMLClient = new VPAIDHTML5Client(containerEl, videoEl, {});\n  this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src, callback);\n\n  function sanityCheck(container, video, cb) {\n    if (!dom.isDomElement(container)) {\n      throw new VASTError(VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL);\n    }\n\n    if (!dom.isDomElement(video) || video.tagName.toLowerCase() !== 'video') {\n      throw new VASTError(VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL);\n    }\n\n    if (!isFunction(cb)) {\n      throw new VASTError(VPAIDHTML5Tech.MISSING_CALLBACK);\n    }\n  }\n};\n\nVPAIDHTML5Tech.prototype.unloadAdUnit = function unloadAdUnit() {\n  if (this.vpaidHTMLClient) {\n    try {\n      this.vpaidHTMLClient.destroy();\n    } catch(e) {\n      if (console && isFunction(console.log)) {\n        console.log('VAST ERROR: trying to unload the VPAID adunit');\n      }\n    }\n\n    this.vpaidHTMLClient = null;\n  }\n\n  if (this.containerEl) {\n    dom.remove(this.containerEl);\n    this.containerEl = null;\n  }\n};\n\nvar PREFIX = 'on VPAIDHTML5Tech';\nVPAIDHTML5Tech.INVALID_MEDIA_FILE = PREFIX + ', invalid MediaFile';\nVPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL = PREFIX + ', invalid container HtmlElement';\nVPAIDHTML5Tech.INVALID_DOM_VIDEO_EL = PREFIX + ', invalid HTMLVideoElement';\nVPAIDHTML5Tech.MISSING_CALLBACK = PREFIX + ', missing valid callback';\n\n","function VPAIDIntegrator(player, settings) {\n  if (!(this instanceof VPAIDIntegrator)) {\n    return new VPAIDIntegrator(player);\n  }\n\n  this.VIEW_MODE = {\n    NORMAL: 'normal',\n    FULLSCREEN: \"fullscreen\",\n    THUMBNAIL: \"thumbnail\"\n  };\n  this.player = player;\n  this.containerEl = createVPAIDContainerEl(player);\n  this.options = {\n    responseTimeout: 2000,\n    VPAID_VERSION: {\n      full: '2.0',\n      major: 2,\n      minor: 0\n    }\n  };\n  this.settings = settings;\n\n  /*** Local functions ***/\n\n  function createVPAIDContainerEl() {\n    var containerEl = document.createElement('div');\n    dom.addClass(containerEl, 'VPAID-container');\n    player.el().insertBefore(containerEl, player.controlBar.el());\n    return containerEl;\n\n  }\n}\n\n//List of supported VPAID technologies\nVPAIDIntegrator.techs = [\n  VPAIDFlashTech,\n  VPAIDHTML5Tech\n];\n\nVPAIDIntegrator.prototype.playAd = function playVPaidAd(vastResponse, callback) {\n  var that = this;\n  var tech;\n  var player = this.player;\n\n  callback = callback || noop;\n  if (!(vastResponse instanceof VASTResponse)) {\n    return callback(new VASTError('on VASTIntegrator.playAd, missing required VASTResponse'));\n  }\n\n  player.one('error', function () {\n    removeAdUnit();\n  });\n\n  tech = this._findSupportedTech(vastResponse, this.settings);\n  dom.addClass(player.el(), 'vjs-vpaid-ad');\n\n  if (tech) {\n    async.waterfall([\n      function (next) {\n        next(null, tech, vastResponse);\n      },\n      this._loadAdUnit.bind(this),\n      this._playAdUnit.bind(this),\n      this._finishPlaying.bind(this)\n\n    ], function (error, adUnit, vastResponse) {\n      removeAdUnit(error);\n\n      callback(error, vastResponse);\n    });\n\n    return {\n      type: 'VPAID',\n      pauseAd: function() {\n        player.trigger('vpaid.pauseAd');\n      },\n      resumeAd: function() {\n        player.trigger('vpaid.resumeAd');\n      }\n    };\n  }\n\n  callback(new VASTError('on VPAIDIntegrator.playAd, could not find a supported mediaFile'));\n\n  return null;\n  /*** Local functions ***/\n  function removeAdUnit(error) {\n    if (error) {\n      that._trackError(vastResponse);\n      player.trigger('vast.adError');\n    }\n\n    tech.unloadAdUnit();\n    dom.removeClass(player.el(), 'vjs-vpaid-ad');\n    player.trigger('vpaid.adEnd');\n  }\n};\n\nVPAIDIntegrator.prototype._findSupportedTech = function (vastResponse, settings) {\n  if (!(vastResponse instanceof VASTResponse)) {\n    return null;\n  }\n\n  var vpaidMediaFiles = vastResponse.mediaFiles.filter(vastUtil.isVPAID);\n  var i, len, mediaFile, VPAIDTech;\n\n  for (i = 0, len = vpaidMediaFiles.length; i < len; i += 1) {\n    mediaFile = vpaidMediaFiles[i];\n    VPAIDTech = findSupportedTech(mediaFile);\n    if (VPAIDTech) {\n      return new VPAIDTech(mediaFile, settings);\n    }\n  }\n\n  return null;\n\n  /*** Local functions ***/\n  function findSupportedTech(mediafile) {\n    var type = mediafile.type;\n    var i, len, VPAIDTech;\n\n    for (i = 0, len = VPAIDIntegrator.techs.length; i < len; i += 1) {\n      VPAIDTech = VPAIDIntegrator.techs[i];\n      if (VPAIDTech.supports(type)) {\n        return VPAIDTech;\n      }\n    }\n    return null;\n  }\n};\n\nVPAIDIntegrator.prototype._loadAdUnit = function (tech, vastResponse, next) {\n  var player = this.player;\n  var vjsTechEl = player.el().querySelector('.vjs-tech');\n  tech.loadAdUnit(this.containerEl, vjsTechEl, function (error, adUnit) {\n    if (error) {\n      return next(error, adUnit, vastResponse);\n    }\n\n    try {\n      var WrappedAdUnit = new VPAIDAdUnitWrapper(adUnit, {src: tech.mediaFile.src});\n      var techClass = 'vjs-' + tech.name + '-ad';\n      dom.addClass(player.el(), techClass);\n      player.one('vpaid.adEnd', function() {\n        dom.removeClass(player.el(),techClass);\n      });\n      next(null, WrappedAdUnit, vastResponse);\n    } catch (e) {\n      next(e, adUnit, vastResponse);\n    }\n  });\n};\n\nVPAIDIntegrator.prototype._playAdUnit = function (adUnit, vastResponse, callback) {\n  async.waterfall([\n    function (next) {\n      next(null, adUnit, vastResponse);\n    },\n    this._handshake.bind(this),\n    this._initAd.bind(this),\n    this._setupEvents.bind(this),\n    this._addSkipButton.bind(this),\n    this._linkPlayerControls.bind(this),\n    this._startAd.bind(this)\n  ], callback);\n};\n\nVPAIDIntegrator.prototype._handshake = function handshake(adUnit, vastResponse, next) {\n  adUnit.handshakeVersion('2.0', function (error, version) {\n    if (error) {\n      return next(error, adUnit, vastResponse);\n    }\n\n    if (version && isSupportedVersion(version)) {\n      return next(null, adUnit, vastResponse);\n    }\n\n    return next(new VASTError('on VPAIDIntegrator._handshake, unsupported version \"' + version + '\"'), adUnit, vastResponse);\n  });\n\n  function isSupportedVersion(version) {\n    var majorNum = major(version);\n    return majorNum >= 1 && majorNum <= 2;\n  }\n\n  function major(version) {\n    var parts = version.split('.');\n    return parseInt(parts[0], 10);\n  }\n};\n\nVPAIDIntegrator.prototype._initAd = function (adUnit, vastResponse, next) {\n  var tech = this.player.el().querySelector('.vjs-tech');\n  var dimension = dom.getDimension(tech);\n  adUnit.initAd(dimension.width, dimension.height, this.VIEW_MODE.NORMAL, -1, vastResponse.adParameters || '', function (error) {\n    next(error, adUnit, vastResponse);\n  });\n};\n\nVPAIDIntegrator.prototype._setupEvents = function (adUnit, vastResponse, next) {\n  var adUnitSrc = adUnit.options.src;\n  var tracker = new VASTTracker(adUnitSrc, vastResponse);\n  var player = this.player;\n\n  adUnit.on('AdSkipped', function () {\n    tracker.trackSkip();\n  });\n\n  adUnit.on('AdImpression', function () {\n    tracker.trackImpressions();\n  });\n\n  adUnit.on('AdVideoStart', function () {\n    tracker.trackStart();\n  });\n\n  adUnit.on('AdVideoFirstQuartile', function () {\n    tracker.trackFirstQuartile();\n  });\n\n  adUnit.on('AdVideoMidpoint', function () {\n    tracker.trackMidpoint();\n  });\n\n  adUnit.on('AdVideoThirdQuartile', function () {\n    tracker.trackThirdQuartile();\n  });\n\n  adUnit.on('AdVideoComplete', function () {\n    tracker.trackComplete();\n  });\n\n  adUnit.on('AdClickThru', function (data) {\n    var url = data.url;\n    var playerHandles = data.playerHandles;\n    var clickThruUrl = isNotEmptyString(url) ? url : generateClickThroughURL(vastResponse.clickThrough);\n\n    tracker.trackClick();\n    if (playerHandles && clickThruUrl) {\n      window.open(clickThruUrl, '_blank');\n    }\n\n    function generateClickThroughURL(clickThroughMacro) {\n      var variables = {\n        ASSETURI: adUnit.options.src,\n        CONTENTPLAYHEAD: 0 //In VPAID there is no method to know the current time from the adUnit\n      };\n\n      return clickThroughMacro ? vastUtil.parseURLMacro(clickThroughMacro, variables) : null;\n    }\n  });\n\n  adUnit.on('AdUserAcceptInvitation', function () {\n    tracker.trackAcceptInvitation();\n    tracker.trackAcceptInvitationLinear();\n  });\n\n  adUnit.on('AdUserClose', function () {\n    tracker.trackClose();\n    tracker.trackCloseLinear();\n  });\n\n  adUnit.on('AdPaused', function () {\n    tracker.trackPause();\n  });\n\n  adUnit.on('AdUserMinimize', function () {\n    tracker.trackCollapse();\n  });\n\n  adUnit.on('AdError', function () {\n    //NOTE: we track errors code 901, as noted in VAST 3.0\n    tracker.trackErrorWithCode(901);\n  });\n\n  adUnit.on('AdPlaying', function () {\n    //NOTE: we track errors code 901, as noted in VAST 3.0\n    tracker.trackResume();\n  });\n\n  adUnit.on('AdVolumeChange', function () {\n    var lastVolume = player.volume();\n    adUnit.getAdVolume(function (error, currentVolume) {\n      if (currentVolume === 0 && lastVolume > 0) {\n        tracker.trackMute();\n      }\n\n      if (currentVolume > 0 && lastVolume === 0) {\n        tracker.trackUnmute();\n      }\n\n      player.volume(currentVolume);\n    });\n  });\n\n  var updateViewSize = resizeAd.bind(this, player, adUnit, this.VIEW_MODE);\n\n  if (this.settings.autoResize) {\n    var updateViewSizeThrottled = throttle(updateViewSize, 100);\n    dom.addEventListener(window, 'resize', updateViewSizeThrottled);\n    dom.addEventListener(window, 'orientationchange', updateViewSizeThrottled);\n  }\n\n  player.on('vast.resize', updateViewSize);\n  player.on('vpaid.pauseAd', pauseAdUnit);\n  player.on('vpaid.resumeAd', resumeAdUnit);\n\n  player.one('vpaid.adEnd', function () {\n    player.off('vast.resize', updateViewSize);\n    player.off('vpaid.pauseAd', pauseAdUnit);\n    player.off('vpaid.resumeAd', resumeAdUnit);\n  });\n\n  next(null, adUnit, vastResponse);\n\n  /*** Local Functions ***/\n  function pauseAdUnit() {\n    adUnit.pauseAd(noop);\n  }\n\n  function resumeAdUnit() {\n    adUnit.resumeAd(noop);\n  }\n};\n\nVPAIDIntegrator.prototype._addSkipButton = function (adUnit, vastResponse, next) {\n  var skipButton;\n  var player = this.player;\n\n  adUnit.on('AdSkippableStateChange', updateSkipButtonState);\n\n  playerUtils.only(player, ['vast.adEnd', 'vast.adError'], removeSkipButton);\n\n  next(null, adUnit, vastResponse);\n\n  /*** Local function ***/\n  function updateSkipButtonState() {\n    adUnit.getAdSkippableState(function (error, isSkippable) {\n      if (isSkippable) {\n        addSkipButton(player);\n      } else {\n        removeSkipButton(player);\n      }\n    });\n  }\n\n  function addSkipButton(player) {\n    skipButton = createSkipButton(player);\n    player.el().appendChild(skipButton);\n  }\n\n  function removeSkipButton() {\n    dom.remove(skipButton);\n    skipButton = null;\n  }\n\n  function createSkipButton() {\n    var skipButton = window.document.createElement(\"div\");\n    dom.addClass(skipButton, \"vast-skip-button\");\n    dom.addClass(skipButton, \"enabled\");\n    skipButton.innerHTML = \"Skip ad\";\n\n    skipButton.onclick = function (e) {\n      adUnit.skipAd(noop);//We skip the adUnit\n\n      //We prevent event propagation to avoid problems with the clickThrough and so on\n      if (window.Event.prototype.stopPropagation !== undefined) {\n        e.stopPropagation();\n      } else {\n        return false;\n      }\n    };\n\n    return skipButton;\n  }\n};\n\nVPAIDIntegrator.prototype._linkPlayerControls = function (adUnit, vastResponse, next) {\n  linkVolumeControl(this.player, adUnit);\n  linkFullScreenControl(this.player, adUnit, this.VIEW_MODE);\n\n  next(null, adUnit, vastResponse);\n\n  /*** Local functions ***/\n  function linkVolumeControl(player, adUnit) {\n    player.on('volumechange', updateAdUnitVolume);\n    adUnit.on('AdVolumeChange', updatePlayerVolume);\n\n    player.on('vpaid.adEnd', function () {\n      player.off('volumechange', updateAdUnitVolume);\n    });\n\n\n    /*** local functions ***/\n    function updateAdUnitVolume() {\n      var vol = player.muted() ? 0 : player.volume();\n      adUnit.setAdVolume(vol, logError);\n    }\n\n    function updatePlayerVolume() {\n      adUnit.getAdVolume(function (error, vol) {\n        if (error) {\n          logError(error);\n        } else {\n          player.volume(vol);\n        }\n      });\n    }\n  }\n\n  function linkFullScreenControl(player, adUnit, VIEW_MODE) {\n    var updateViewSize = resizeAd.bind(this, player, adUnit, VIEW_MODE);\n\n    player.on('fullscreenchange', updateViewSize);\n\n    player.on('vpaid.adEnd', function () {\n      player.off('fullscreenchange', updateViewSize);\n    });\n  }\n};\n\nVPAIDIntegrator.prototype._startAd = function (adUnit, vastResponse, next) {\n  var player = this.player;\n\n  adUnit.startAd(function (error) {\n    if (!error) {\n      player.trigger('vast.adStart');\n    }\n    next(error, adUnit, vastResponse);\n  });\n};\n\nVPAIDIntegrator.prototype._finishPlaying = function (adUnit, vastResponse, next) {\n  adUnit.on('AdStopped', function () {\n    next(null, adUnit, vastResponse);\n  });\n\n  adUnit.on('AdError', function () {\n    next(new VASTError('on VPAIDIntegrator, error while waiting for the adUnit to finish playing'), adUnit, vastResponse);\n  });\n};\n\nVPAIDIntegrator.prototype._trackError = function trackError(response) {\n  vastUtil.track(response.errorURLMacros, {ERRORCODE: 901});\n};\n\nfunction resizeAd(player, adUnit, VIEW_MODE) {\n  var dimension = dom.getDimension(player.el());\n  var MODE = player.isFullscreen() ? VIEW_MODE.FULLSCREEN : VIEW_MODE.NORMAL;\n  adUnit.resizeAd(dimension.width, dimension.height, MODE, logError);\n}\n\nfunction logError(error) {\n  if (error && console && console.log) {\n    console.log('ERROR: ' + error.message, error);\n  }\n}\n\n","function Ad(adJTree) {\n  if (!(this instanceof Ad)) {\n    return new Ad(adJTree);\n  }\n\n  this.id = adJTree.attr('id');\n  this.sequence = adJTree.attr('sequence');\n\n  if(adJTree.inLine) {\n    this.inLine = new InLine(adJTree.inLine);\n  }\n\n  if(adJTree.wrapper){\n    this.wrapper = new Wrapper(adJTree.wrapper);\n  }\n}","\nfunction Creative(creativeJTree) {\n  if(!(this instanceof Creative)) {\n    return new Creative(creativeJTree);\n  }\n\n  this.id = creativeJTree.attr('id');\n  this.sequence = creativeJTree.attr('sequence');\n  this.adId = creativeJTree.attr('adId');\n  this.apiFramework = creativeJTree.attr('apiFramework');\n\n  if(creativeJTree.linear) {\n    this.linear = new Linear(creativeJTree.linear);\n  }\n}","function InLine(inlineJTree) {\n  if (!(this instanceof InLine)) {\n    return new InLine(inlineJTree);\n  }\n\n  //Required Fields\n  this.adTitle = xml.keyValue(inlineJTree.adTitle);\n  this.adSystem = xml.keyValue(inlineJTree.adSystem);\n  this.impressions = vastUtil.parseImpressions(inlineJTree.impression);\n  this.creatives = vastUtil.parseCreatives(inlineJTree.creatives);\n\n  //Optional Fields\n  this.description = xml.keyValue(inlineJTree.description);\n  this.advertiser = xml.keyValue(inlineJTree.advertiser);\n  this.surveys = parseSurveys(inlineJTree.survey);\n  this.error = xml.keyValue(inlineJTree.error);\n  this.pricing = xml.keyValue(inlineJTree.pricing);\n  this.extensions = inlineJTree.extensions;\n\n  /*** Local Functions ***/\n  function parseSurveys(inlineSurveys) {\n    if (inlineSurveys) {\n      return transformArray(isArray(inlineSurveys) ? inlineSurveys : [inlineSurveys], function (survey) {\n        if(isNotEmptyString(survey.keyValue)){\n          return {\n            uri: survey.keyValue,\n            type: survey.attr('type')\n          };\n        }\n\n        return undefined;\n      });\n    }\n    return [];\n  }\n}","function Linear(linearJTree) {\n  if (!(this instanceof Linear)) {\n    return new Linear(linearJTree);\n  }\n\n  //Required Elements\n  this.duration = vastUtil.parseDuration(xml.keyValue(linearJTree.duration));\n  this.mediaFiles = parseMediaFiles(linearJTree.mediaFiles && linearJTree.mediaFiles.mediaFile);\n\n  //Optional fields\n  this.trackingEvents = parseTrackingEvents(linearJTree.trackingEvents && linearJTree.trackingEvents.tracking, this.duration);\n  this.skipoffset = vastUtil.parseOffset(xml.attr(linearJTree, 'skipoffset'), this.duration);\n\n  if (linearJTree.videoClicks) {\n    this.videoClicks = new VideoClicks(linearJTree.videoClicks);\n  }\n  \n  if(linearJTree.adParameters) {\n    this.adParameters = xml.keyValue(linearJTree.adParameters);\n\n    if(xml.attr(linearJTree.adParameters, 'xmlEncoded')){\n      this.adParameters = xml.decode(this.adParameters);\n    }\n  }\n\n  /*** Local functions ***/\n  function parseTrackingEvents(trackingEvents, duration) {\n    var trackings = [];\n    if (isDefined(trackingEvents)) {\n      trackingEvents = isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n      trackingEvents.forEach(function (trackingData) {\n        trackings.push(new TrackingEvent(trackingData, duration));\n      });\n    }\n    return trackings;\n  }\n\n  function parseMediaFiles(mediaFilesJxonTree) {\n    var mediaFiles = [];\n    if (isDefined(mediaFilesJxonTree)) {\n      mediaFilesJxonTree = isArray(mediaFilesJxonTree) ? mediaFilesJxonTree : [mediaFilesJxonTree];\n\n      mediaFilesJxonTree.forEach(function (mfData) {\n        mediaFiles.push(new MediaFile(mfData));\n      });\n    }\n    return mediaFiles;\n  }\n}","function MediaFile(mediaFileJTree) {\n  if (!(this instanceof MediaFile)) {\n    return new MediaFile(mediaFileJTree);\n  }\n\n  //Required attributes\n  this.src = xml.keyValue(mediaFileJTree);\n  this.delivery = mediaFileJTree.attr('delivery');\n  this.type = mediaFileJTree.attr('type');\n  this.width = mediaFileJTree.attr('width');\n  this.height = mediaFileJTree.attr('height');\n\n  //Optional attributes\n  this.codec = mediaFileJTree.attr('codec');\n  this.id = mediaFileJTree.attr('id');\n  this.bitrate = mediaFileJTree.attr('bitrate');\n  this.minBitrate = mediaFileJTree.attr('minBitrate');\n  this.maxBitrate = mediaFileJTree.attr('maxBitrate');\n  this.scalable = mediaFileJTree.attr('scalable');\n  this.maintainAspectRatio = mediaFileJTree.attr('maintainAspectRatio');\n  this.apiFramework = mediaFileJTree.attr('apiFramework');\n}","function TrackingEvent(trackingJTree, duration) {\n  if (!(this instanceof TrackingEvent)) {\n    return new TrackingEvent(trackingJTree, duration);\n  }\n\n  this.name = trackingJTree.attr('event');\n  this.uri = xml.keyValue(trackingJTree);\n\n  if('progress' === this.name) {\n    this.offset = vastUtil.parseOffset(trackingJTree.attr('offset'), duration);\n  }\n}\n","function VASTClient(options) {\n  if (!(this instanceof VASTClient)) {\n    return new VASTClient(options);\n  }\n  var defaultOptions = {\n    WRAPPER_LIMIT: 5\n  };\n\n  options = options || {};\n  this.settings = extend({}, options, defaultOptions);\n  this.errorURLMacros = [];\n}\n\nVASTClient.prototype.getVASTResponse = function getVASTResponse(url, callback) {\n  var that = this;\n\n  //We reset the errorURLMacros before doing anything.\n  this.errorURLMacros = [];\n\n  async.waterfall([\n      this._getAd.bind(this, url),\n      buildVASTResponse\n    ],\n    this._sendVASTResponse(callback));\n\n  /*** Local functions ***/\n  function buildVASTResponse(adsChain, cb) {\n    try {\n      var response = that._buildVASTResponse(adsChain);\n      cb(null, response);\n    } catch (e) {\n      cb(e);\n    }\n  }\n};\n\nVASTClient.prototype._sendVASTResponse = function sendVASTResponse(callback) {\n  var that = this;\n  callback = callback || noop;\n\n  return function (error, response) {\n    if (error) {\n      vastUtil.track(that.errorURLMacros, {ERRORCODE: error.code || 900});  //900 <== Undefined error\n    }\n    callback(error, response);\n  };\n};\n\nVASTClient.prototype._getAd = function getVASTAd(url, callback) {\n  var error;\n  var that = this;\n  var options = isObject(url) && !isNull(url) ? url : {url: url};\n  options.ads = options.ads || [];\n  error = sanityCheck(options, callback);\n  if (error) {\n    if (isFunction(callback)) {\n      return callback(error, null);\n    }\n    throw error;\n  }\n\n  async.waterfall([\n    requestVASTXml,\n    buildAd\n  ], callback);\n\n  /*** local function ***/\n  function sanityCheck(opts, cb) {\n    if (!isString(opts.url)) {\n      return new VASTError('on VASTClient._getAd, missing video tag URL');\n    }\n\n    if (!isFunction(cb)) {\n      return new VASTError('on VASTClient._getAd, missing callback function');\n    }\n\n    if (opts.ads.length >= that.WRAPPER_LIMIT) {\n      return new VASTError(\"on VASTClient._getAd, players wrapper limit reached (the limit is \" + that.WRAPPER_LIMIT + \")\", 302);\n    }\n  }\n\n  function requestVASTXml(callback) {\n    that._requestVASTXml(options.url, callback);\n  }\n\n  function buildAd(adXML, callback) {\n    var adTree;\n    try {\n      adTree = that._buildVastTree(adXML);\n      getValidAd(adTree.ads, options.ads, callback);\n    } catch (e) {\n      callback(e);\n    }\n\n    /*** local Functions  ***/\n    function getValidAd(possibleAds, previousAds, callback) {\n      getAd(possibleAds.shift(), previousAds, function (error, adChain) {\n        if (error) {\n          if (possibleAds.length > 0) {\n            return getValidAd(possibleAds, previousAds, callback);\n          }\n          return callback(error);\n        }\n        callback(null, adChain);\n      });\n    }\n\n    function getAd(adTree, previousAds, callback) {\n      try {\n        var ad = that._buildAd(adTree);\n\n        if (ad.wrapper) {\n          return getNextAd(ad, previousAds, callback);\n        }\n        return callback(null, previousAds.concat(ad));\n      } catch (e) {\n        callback(e);\n      }\n    }\n\n    function getNextAd(ad, previousAds, callback) {\n      return that._getAd({\n        url: ad.wrapper.VASTAdTagURI,\n        ads: previousAds.concat(ad)\n      }, callback);\n    }\n  }\n};\n\nVASTClient.prototype._requestVASTXml = function requestVASTXml(url, callback) {\n  try{\n    http.get(url, function (error, response, status){\n      if(error) {\n        return callback(new VASTError(\"on VASTClient.requestVastXML, HTTP request error with status '\" + status + \"'\", 301));\n      }\n      callback(null, response);\n    }, {\n      withCredentials: true\n    });\n  }catch(e){\n    callback(e);\n  }\n};\n\nVASTClient.prototype._buildVastTree = function buildVastTree(xmlStr) {\n  var vastTree, vastVersion;\n\n  try {\n    vastTree = xml.toJXONTree(xmlStr);\n    vastVersion = xml.attr(vastTree, 'version');\n    vastTree.ads = isArray(vastTree.ad) ? vastTree.ad : [vastTree.ad];\n\n  } catch (e) {\n    throw new VASTError(\"on VASTClient.buildVastTree, error parsing xml\", 100);\n  }\n\n  if (!vastTree.ad) {\n    throw new VASTError('on VASTClient.buildVastTree, no Ad in VAST tree', 303);\n  }\n\n  if(vastVersion && (vastVersion != 3 && vastVersion != 2)){\n    throw new VASTError('on VASTClient.buildVastTree, not supported VAST version \"'+vastVersion+'\"', 102);\n  }\n\n  return vastTree;\n\n};\n\nVASTClient.prototype._buildAd = function buildAd(adJxonTree) {\n  var ad;\n  var that = this;\n\n  try {\n    ad = new Ad(adJxonTree);\n  } catch (e) {\n    throw new VASTError('on VASTClient._buildAd, ' + e.message, 900);\n  }\n\n  addErrorUrlMacros(ad);\n  validateAd(ad);\n\n  return ad;\n  /*** Local Functions ***/\n\n  function addErrorUrlMacros(ad) {\n    if(ad.wrapper && ad.wrapper.error) {\n      that.errorURLMacros.push(ad.wrapper.error);\n    }\n\n    if(ad.inLine && ad.inLine.error){\n      that.errorURLMacros.push(ad.inLine.error);\n    }\n  }\n\n  function validateAd(ad) {\n    var wrapper = ad.wrapper;\n    var inLine = ad.inLine;\n\n    if (inLine && wrapper) {\n      throw new VASTError('on VASTClient._buildAd, InLine and Wrapper both found on the same Ad', 101);\n    }\n\n    if (!inLine && !wrapper) {\n      throw new VASTError('on VASTClient._buildAd, nor wrapper nor inline elements found on the Ad', 101);\n    }\n\n    if (inLine) {\n      if (inLine.creatives.length === 0) {\n        throw new VASTError(\"on VASTClient._buildAd, missing creative in InLine element\", 101);\n      }\n    }\n\n    if (wrapper) {\n      if (!wrapper.VASTAdTagURI) {\n        throw new VASTError(\"on VASTClient._buildAd, missing 'VASTAdTagURI' in wrapper\", 101);\n      }\n    }\n  }\n};\n\nVASTClient.prototype._buildVASTResponse = function buildVASTResponse(adsChain) {\n  var response = new VASTResponse();\n  addAdsToResponse(response, adsChain);\n  validateResponse(response);\n\n  return response;\n\n  //*** Local function ****\n  function addAdsToResponse(response, ads) {\n    ads.forEach(function (ad) {\n      response.addAd(ad);\n    });\n  }\n\n  function validateResponse(response) {\n    var progressEvents = response.trackingEvents.progress;\n\n    if(!response.hasLinear()){\n      throw new VASTError(\"on VASTClient._buildVASTResponse, Received an Ad type that is not supported\", 200);\n    }\n\n    if (!response.duration) {\n      throw new VASTError(\"on VASTClient._buildVASTResponse, Missing duration field in VAST response\", 101);\n    }\n\n    if (progressEvents) {\n      if (progressEvents.length > 1) {\n        throw new VASTError(\"on VASTClient._buildVASTResponse, found more than one progress tracking event in VAST response\", 101);\n      }\n\n      if (!isNumber(progressEvents[0].offset)) {\n        throw new VASTError(\"on VASTClient._buildVASTResponse, missing offset attribute on progress tracking event\", 101);\n      }\n    }\n  }\n};\n","var VAST = {};\n\nfunction VASTError(message, code) {\n  this.message = 'VAST Error: ' + (message || '');\n  if (code) {\n    this.code = code;\n  }\n}\n\nVASTError.prototype = new Error();\nVASTError.prototype.name = \"VAST Error\";","/**\n * Inner helper class that deals with the logic of the individual steps needed to setup an ad in the player.\n *\n * @param player {object} instance of the player that will play the ad. It assumes that the videojs-contrib-ads plugin\n *                        has been initialized when you use its utility functions.\n *\n * @constructor\n */\nfunction VASTIntegrator(player) {\n  if (!(this instanceof VASTIntegrator)) {\n    return new VASTIntegrator(player);\n  }\n\n  this.player = player;\n}\n\nVASTIntegrator.prototype.playAd = function playAd(vastResponse, callback) {\n  var that = this;\n  callback = callback || noop;\n\n  if (!(vastResponse instanceof VASTResponse)) {\n    return callback(new VASTError('On VASTIntegrator, missing required VASTResponse'));\n  }\n\n  async.waterfall([\n    function (next) {\n      next(null, vastResponse);\n    },\n    this._selectAdSource.bind(this),\n    this._createVASTTracker.bind(this),\n    this._addClickThrough.bind(this),\n    this._addSkipButton.bind(this),\n    this._setupEvents.bind(this),\n    this._playSelectedAd.bind(this)\n  ], function (error, response) {\n    if (error && response) {\n      that._trackError(error, response);\n    }\n    callback(error, response);\n  });\n\n  return {\n    type: 'VAST',\n    pauseAd: function() {\n      that.player.pause();\n    },\n\n    resumeAd: function() {\n      that.player.play();\n    }\n  };\n};\n\nVASTIntegrator.prototype._selectAdSource = function selectAdSource(response, callback) {\n  var source;\n\n  var playerWidth = dom.getDimension(this.player.el()).width;\n  response.mediaFiles.sort(function compareTo(a, b) {\n    var deltaA = Math.abs(playerWidth - a.width);\n    var deltaB = Math.abs(playerWidth - b.width);\n    return deltaA - deltaB;\n  });\n\n  source = this.player.selectSource(response.mediaFiles).source;\n\n  if (source) {\n    return callback(null, source, response);\n  }\n\n  // code 403 <== Couldn't find MediaFile that is supported by this video player\n  callback(new VASTError(\"Could not find Ad mediafile supported by this player\", 403), response);\n};\n\nVASTIntegrator.prototype._createVASTTracker = function createVASTTracker(adMediaFile, response, callback) {\n  try {\n    callback(null, adMediaFile, new VASTTracker(adMediaFile.src, response), response);\n  } catch (e) {\n    callback(e, response);\n  }\n};\n\nVASTIntegrator.prototype._setupEvents = function setupEvents(adMediaFile, tracker, response, callback) {\n  var previouslyMuted;\n  var player = this.player;\n  player.on('fullscreenchange', trackFullscreenChange);\n  player.on('vast.adStart', trackImpressions);\n  player.on('pause', trackPause);\n  player.on('timeupdate', trackProgress);\n  player.on('volumechange', trackVolumeChange);\n\n  player.one('vast.adEnd', unbindEvents);\n  player.one('vast.adsCancel', unbindEvents);\n\n  //NOTE: Pending tracking events skip, close, closeLinear, expand, collapse and creativeView. See VAST implementation\n\n  return callback(null, adMediaFile, response);\n\n  /*** Local Functions ***/\n  function unbindEvents() {\n    tracker.trackComplete();\n    player.off('fullscreenchange', trackFullscreenChange);\n    player.off('vast.adStart', trackImpressions);\n    player.off('pause', trackPause);\n    player.off('timeupdate', trackProgress);\n    player.off('volumechange', trackVolumeChange);\n  }\n\n  function trackFullscreenChange() {\n    if (player.isFullscreen()) {\n      tracker.trackFullscreen();\n    } else {\n      tracker.trackExitFullscreen();\n    }\n  }\n\n  function trackPause() {\n    tracker.trackPause();\n    player.one('play', function () {\n      tracker.trackResume();\n    });\n  }\n\n  function trackProgress() {\n    var currentTimeInMs = player.currentTime() * 1000;\n    tracker.trackProgress(currentTimeInMs);\n  }\n\n  function trackImpressions() {\n    tracker.trackImpressions();\n  }\n\n  function trackVolumeChange() {\n    var muted = player.muted();\n    if (muted) {\n      tracker.trackMute();\n    } else if (previouslyMuted) {\n      tracker.trackUnmute();\n    }\n    previouslyMuted = muted;\n  }\n};\n\nVASTIntegrator.prototype._addSkipButton = function addSkipButton(source, tracker, response, callback) {\n  var skipOffsetInSec;\n\n  if (isNumber(response.skipoffset)) {\n    skipOffsetInSec = response.skipoffset / 1000;\n    addSkipButtonToPlayer(this.player, skipOffsetInSec);\n  }\n  callback(null, source, tracker, response);\n\n  /*** Local function ***/\n  function addSkipButtonToPlayer(player, skipOffset) {\n    var skipButton = createSkipButton(player);\n    var updateSkipButton = updateSkipButtonState.bind(this, skipButton, skipOffset, player);\n\n    player.el().appendChild(skipButton);\n    player.on('timeupdate', updateSkipButton);\n\n    player.one('ended', removeSkipButton);\n    player.one('error', removeSkipButton);\n\n    function removeSkipButton() {\n      player.off('timeupdate', updateSkipButton);\n      dom.remove(skipButton);\n    }\n  }\n\n  function createSkipButton(player) {\n    var skipButton = window.document.createElement(\"div\");\n    dom.addClass(skipButton, \"vast-skip-button\");\n\n    skipButton.onclick = function (e) {\n      if (dom.hasClass(skipButton, 'enabled')) {\n        tracker.trackSkip();\n        player.trigger('ended');//We trigger the end of the ad playing\n      }\n\n      //We prevent event propagation to avoid problems with the clickThrough and so on\n      if (window.Event.prototype.stopPropagation !== undefined) {\n        e.stopPropagation();\n      } else {\n        return false;\n      }\n    };\n\n    return skipButton;\n  }\n\n  function updateSkipButtonState(skipButton, skipOffset, player) {\n    var timeLeft = Math.ceil(skipOffset - player.currentTime());\n    if (timeLeft > 0) {\n      skipButton.innerHTML = \"Skip in \" + toFixedDigits(timeLeft, 2) + \"...\";\n    } else {\n      if (!dom.hasClass(skipButton, 'enabled')) {\n        dom.addClass(skipButton, 'enabled');\n        skipButton.innerHTML = \"Skip ad\";\n      }\n    }\n  }\n};\n\nVASTIntegrator.prototype._addClickThrough = function addClickThrough(mediaFile, tracker, response, callback) {\n  var player = this.player;\n  var blocker = createClickThroughBlocker(player, tracker, response);\n  var updateBlocker = updateBlockerURL.bind(this, blocker, response, player);\n\n  player.el().insertBefore(blocker, player.controlBar.el());\n  player.on('timeupdate', updateBlocker);\n  player.one('ended', removeBlocker);\n  player.one('error', removeBlocker);\n\n  return callback(null, mediaFile, tracker, response);\n\n  /*** Local Functions ***/\n\n  function createClickThroughBlocker(player, tracker, response) {\n    var blocker = window.document.createElement(\"a\");\n    var clickThroughMacro = response.clickThrough;\n\n    dom.addClass(blocker, 'vast-blocker');\n    blocker.href = generateClickThroughURL(clickThroughMacro, player);\n\n    if (isString(clickThroughMacro)) {\n      blocker.target = \"_blank\";\n    }\n\n    blocker.onclick = function (e) {\n      if (player.paused()) {\n        player.play();\n\n        //We prevent event propagation to avoid problems with the player's normal pause mechanism\n        if (window.Event.prototype.stopPropagation !== undefined) {\n          e.stopPropagation();\n        }\n        return false;\n      }\n\n      player.pause();\n      tracker.trackClick();\n    };\n\n    return blocker;\n  }\n\n  function updateBlockerURL(blocker, response, player) {\n    blocker.href = generateClickThroughURL(response.clickThrough, player);\n  }\n\n  function generateClickThroughURL(clickThroughMacro, player) {\n    var variables = {\n      ASSETURI: mediaFile.src,\n      CONTENTPLAYHEAD: vastUtil.formatProgress(player.currentTime() * 1000)\n    };\n\n    return clickThroughMacro ? vastUtil.parseURLMacro(clickThroughMacro, variables) : '#';\n  }\n\n  function removeBlocker() {\n    player.off('timeupdate', updateBlocker);\n    dom.remove(blocker);\n  }\n};\n\nVASTIntegrator.prototype._playSelectedAd = function playSelectedAd(source, response, callback) {\n  var player = this.player;\n\n  player.src(source);\n\n  player.one('durationchange', playAd);\n  player.one('ended', finishPlayingAd);\n  player.one('error', handlePlayerError);\n\n  /**** local functions ******/\n  function playAd() {\n    player.play();\n    player.one('playing', function () {\n      player.trigger('vast.adStart');\n    });\n  }\n\n  function finishPlayingAd() {\n    player.off('error', handlePlayerError);\n    callback(null, response);\n  }\n\n  function handlePlayerError() {\n    player.off('durationchange', playAd);\n    player.off('ended', finishPlayingAd);\n    callback(new VASTError(\"on VASTIntegrator, Player is unable to play the Ad\", 400), response);\n  }\n};\n\nVASTIntegrator.prototype._trackError = function trackError(error, response) {\n  vastUtil.track(response.errorURLMacros, {ERRORCODE: error.code || 900});\n};\n\n","function VASTTracker(assetURI, vastResponse) {\n  if (!(this instanceof VASTTracker)) {\n    return new VASTTracker(assetURI, vastResponse);\n  }\n\n  sanityCheck(assetURI, vastResponse);\n  this.response = vastResponse;\n  this.assetURI = assetURI;\n  this.progress = 0;\n  this.quartiles = {\n    firstQuartile: Math.round(25 * vastResponse.duration) / 100,\n    midpoint: Math.round(50 * vastResponse.duration) / 100,\n    thirdQuartile: Math.round(75 * vastResponse.duration) / 100\n  };\n\n  /*** Local Functions ***/\n  function sanityCheck(assetURI, vastResponse) {\n    if (!isString(assetURI) || isEmptyString(assetURI)) {\n      throw new VASTError('on VASTTracker constructor, missing required the URI of the ad asset being played');\n    }\n\n    if (!(vastResponse instanceof VASTResponse)) {\n      throw new VASTError('on VASTTracker constructor, missing required VAST response');\n    }\n  }\n}\n\nVASTTracker.prototype.trackURLs = function trackURLs(urls, variables) {\n  if (isArray(urls) && urls.length > 0) {\n    variables = extend({\n      ASSETURI: this.assetURI,\n      CONTENTPLAYHEAD: vastUtil.formatProgress(this.progress)\n    }, variables || {});\n\n    vastUtil.track(urls, variables);\n  }\n};\n\nVASTTracker.prototype.trackEvent = function trackEvent(eventName, trackOnce) {\n  this.trackURLs(getEventUris(this.response.trackingEvents[eventName]));\n  if (trackOnce) {\n    this.response.trackingEvents[eventName] = undefined;\n  }\n\n  /*** Local function ***/\n  function getEventUris(trackingEvents) {\n    var uris;\n\n    if (trackingEvents) {\n      uris = [];\n      trackingEvents.forEach(function (event) {\n        uris.push(event.uri);\n      });\n    }\n    return uris;\n  }\n};\n\nVASTTracker.prototype.trackProgress = function trackProgress(newProgress) {\n  var events = [];\n  var ONCE = true;\n  var ALWAYS = false;\n  var trackingEvents = this.response.trackingEvents;\n\n  if (isNumber(newProgress)) {\n    addTrackEvent('start', ONCE, newProgress > 0);\n    addTrackEvent('rewind', ALWAYS, this.progress > newProgress);\n    addQuartileEvents.call(this, newProgress);\n    addProgressEvent.call(this, newProgress);\n    trackEvents.call(this);\n    this.progress = newProgress;\n  }\n\n  /*** Local function ***/\n  function addTrackEvent(eventName, trackOnce, canBeAdded) {\n    if (trackingEvents[eventName] && canBeAdded) {\n      events.push({\n        name: eventName,\n        trackOnce: !!trackOnce\n      });\n    }\n  }\n\n  function addQuartileEvents(progress) {\n    forEach(this.quartiles, function (quartileTime, eventName) {\n      //We only fire the quartile event if the progress is bigger than the quartile time by one second at most.\n      addTrackEvent(eventName, ONCE, progress >= quartileTime && progress <= (quartileTime + 1000));\n    });\n  }\n\n  function addProgressEvent(progress) {\n    var progressEvent = trackingEvents.progress && trackingEvents.progress[0];\n    if (progressEvent) {\n      addTrackEvent('progress', ONCE, progressEvent.offset <= progress);\n    }\n  }\n\n  function trackEvents() {\n    events.forEach(function (event) {\n      this.trackEvent(event.name, event.trackOnce);\n    }, this);\n  }\n};\n\n[\n  'start',\n  'rewind',\n  'fullscreen',\n  'exitFullscreen',\n  'complete',\n  'pause',\n  'resume',\n  'close',\n  'closeLinear',\n  'skip',\n  'mute',\n  'unmute',\n  'firstQuartile',\n  'midpoint',\n  'thirdQuartile',\n  'acceptInvitation',\n  'acceptInvitationLinear',\n  'collapse',\n  'expand'\n].forEach(function (eventName) {\n    VASTTracker.prototype['track' + capitalize(eventName)] = function () {\n      this.trackEvent(eventName);\n    };\n  });\n\nVASTTracker.prototype.trackErrorWithCode = function trackErrorWithCode(errorcode) {\n  if (isNumber(errorcode)) {\n    this.trackURLs(this.response.errorURLMacros, {ERRORCODE: errorcode});\n  }\n};\n\nVASTTracker.prototype.trackImpressions = function trackImpressions() {\n  this.trackURLs(this.response.impressions);\n};\n\nVASTTracker.prototype.trackClick = function trackClick() {\n  this.trackURLs(this.response.clickTrackings);\n};\n","function VideoClicks(videoClickJTree) {\n  if (!(this instanceof VideoClicks)) {\n    return new VideoClicks(videoClickJTree);\n  }\n\n  this.clickThrough = xml.keyValue(videoClickJTree.clickThrough);\n  this.clickTrackings = parseClickTrackings(videoClickJTree.clickTracking);\n  this.customClicks = parseClickTrackings(videoClickJTree.customClick);\n\n  /*** Local functions ***/\n  function parseClickTrackings(trackingData) {\n    var clickTrackings = [];\n    if (trackingData) {\n      trackingData = isArray(trackingData) ? trackingData : [trackingData];\n      trackingData.forEach(function (clickTrackingData) {\n        clickTrackings.push(xml.keyValue(clickTrackingData));\n      });\n    }\n    return clickTrackings;\n  }\n}","function Wrapper(wrapperJTree) {\n  if(!(this instanceof Wrapper)) {\n    return new Wrapper(wrapperJTree);\n  }\n\n  //Required elements\n  this.adSystem = xml.keyValue(wrapperJTree.adSystem);\n  this.impressions = vastUtil.parseImpressions(wrapperJTree.impression);\n  this.VASTAdTagURI = xml.keyValue(wrapperJTree.vASTAdTagURI);\n\n  //Optional elements\n  this.creatives = vastUtil.parseCreatives(wrapperJTree.creatives);\n  this.error = xml.keyValue(wrapperJTree.error);\n  this.extensions = wrapperJTree.extensions;\n\n  //Optional attrs\n  this.followAdditionalWrappers = isDefined(xml.attr(wrapperJTree, 'followAdditionalWrappers'))? xml.attr(wrapperJTree, 'followAdditionalWrappers'): true;\n  this.allowMultipleAds = xml.attr(wrapperJTree, 'allowMultipleAds');\n  this.fallbackOnNoAd = xml.attr(wrapperJTree, 'fallbackOnNoAd');\n}\n\n\n","//Small subset of async\nvar async = {};\n\nasync.setImmediate = function (fn) {\n  setTimeout(fn, 0);\n};\n\nasync.iterator = function (tasks) {\n  var makeCallback = function (index) {\n    var fn = function () {\n      if (tasks.length) {\n        tasks[index].apply(null, arguments);\n      }\n      return fn.next();\n    };\n    fn.next = function () {\n      return (index < tasks.length - 1) ? makeCallback(index + 1) : null;\n    };\n    return fn;\n  };\n  return makeCallback(0);\n};\n\n\nasync.waterfall = function (tasks, callback) {\n  callback = callback || function () { };\n  if (!isArray(tasks)) {\n    var err = new Error('First argument to waterfall must be an array of functions');\n    return callback(err);\n  }\n  if (!tasks.length) {\n    return callback();\n  }\n  var wrapIterator = function (iterator) {\n    return function (err) {\n      if (err) {\n        callback.apply(null, arguments);\n        callback = function () {\n        };\n      }\n      else {\n        var args = Array.prototype.slice.call(arguments, 1);\n        var next = iterator.next();\n        if (next) {\n          args.push(wrapIterator(next));\n        }\n        else {\n          args.push(callback);\n        }\n        async.setImmediate(function () {\n          iterator.apply(null, args);\n        });\n      }\n    };\n  };\n  wrapIterator(async.iterator(tasks))();\n};\n\nasync.when = function (condition, callback) {\n  if (!isFunction(callback)) {\n    throw new Error(\"async.when error: missing callback argument\");\n  }\n\n  var isAllowed = isFunction(condition) ? condition : function () {\n    return !!condition;\n  };\n\n  return function () {\n    var args = arrayLikeObjToArray(arguments);\n    var next = args.pop();\n\n    if (isAllowed.apply(null, args)) {\n      return callback.apply(this, arguments);\n    }\n\n    args.unshift(null);\n    return next.apply(null, args);\n  };\n};\n\n\n","\"use strict\";\n\nvar dom = {};\n\ndom.isVisible = function isVisible(el) {\n  var style = window.getComputedStyle(el);\n  return style.visibility !== 'hidden';\n};\n\ndom.isHidden = function isHidden(el) {\n  var style = window.getComputedStyle(el);\n  return style.display === 'none';\n};\n\ndom.isShown = function isShown(el) {\n  return !dom.isHidden(el);\n};\n\ndom.hide = function hide(el) {\n  el.__prev_style_display_ = el.style.display;\n  el.style.display = 'none';\n};\n\ndom.show = function show(el) {\n  if (dom.isHidden(el)) {\n    el.style.display = el.__prev_style_display_;\n  }\n  el.__prev_style_display_ = undefined;\n};\n\ndom.hasClass = function hasClass(el, cssClass) {\n  var classes, i, len;\n\n  if (isNotEmptyString(cssClass)) {\n    if (el.classList) {\n      return el.classList.contains(cssClass);\n    }\n\n    classes = isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n    cssClass = (cssClass || '');\n\n    for (i = 0, len = classes.length; i < len; i += 1) {\n      if (classes[i] === cssClass) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\ndom.addClass = function (el, cssClass) {\n  var classes;\n\n  if (isNotEmptyString(cssClass)) {\n    if (el.classList) {\n      return el.classList.add(cssClass);\n    }\n\n    classes = isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n    if (isString(cssClass) && isNotEmptyString(cssClass.replace(/\\s+/, ''))) {\n      classes.push(cssClass);\n      el.setAttribute('class', classes.join(' '));\n    }\n  }\n};\n\ndom.removeClass = function (el, cssClass) {\n  var classes;\n\n  if (isNotEmptyString(cssClass)) {\n    if (el.classList) {\n      return el.classList.remove(cssClass);\n    }\n\n    classes = isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n    var newClasses = [];\n    var i, len;\n    if (isString(cssClass) && isNotEmptyString(cssClass.replace(/\\s+/, ''))) {\n\n      for (i = 0, len = classes.length; i < len; i += 1) {\n        if (cssClass !== classes[i]) {\n          newClasses.push(classes[i]);\n        }\n      }\n      el.setAttribute('class', newClasses.join(' '));\n    }\n  }\n};\n\ndom.addEventListener = function addEventListener(el, type, handler) {\n  if(isArray(el)){\n    forEach(el, function(e) {\n      dom.addEventListener(e, type, handler);\n    });\n    return;\n  }\n\n  if(isArray(type)){\n    forEach(type, function(t) {\n      dom.addEventListener(el, t, handler);\n    });\n    return;\n  }\n\n  if (el.addEventListener) {\n    el.addEventListener(type, handler, false);\n  } else if (el.attachEvent) {\n    // WARNING!!! this is a very naive implementation !\n    // the event object that should be passed to the handler\n    // would not be there for IE8\n    // we should use \"window.event\" and then \"event.srcElement\"\n    // instead of \"event.target\"\n    el.attachEvent(\"on\" + type, handler);\n  }\n};\n\ndom.removeEventListener = function removeEventListener(el, type, handler) {\n  if(isArray(el)){\n    forEach(el, function(e) {\n      dom.removeEventListener(e, type, handler);\n    });\n    return;\n  }\n\n  if(isArray(type)){\n    forEach(type, function(t) {\n      dom.removeEventListener(el, t, handler);\n    });\n    return;\n  }\n\n  if (el.removeEventListener) {\n    el.removeEventListener(type, handler, false);\n  } else if (el.detachEvent) {\n    el.detachEvent(\"on\" + type, handler);\n  } else {\n    el[\"on\" + type] = null;\n  }\n};\n\ndom.dispatchEvent = function dispatchEvent(el, event) {\n  if (el.dispatchEvent) {\n    el.dispatchEvent(event);\n  } else {\n    el.fireEvent(\"on\" + event.eventType, event);\n  }\n};\n\ndom.isDescendant = function isDescendant(parent, child) {\n  var node = child.parentNode;\n  while (node !== null) {\n    if (node === parent) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n  return false;\n};\n\ndom.getTextContent = function getTextContent(el){\n  return el.textContent || el.text;\n};\n\ndom.prependChild = function prependChild(parent, child) {\n  if(child.parentNode){\n    child.parentNode.removeChild(child);\n  }\n  return parent.insertBefore(child, parent.firstChild);\n};\n\ndom.remove = function removeNode(node){\n  if(node && node.parentNode){\n    node.parentNode.removeChild(node);\n  }\n};\n\ndom.isDomElement = function isDomElement(o) {\n  return o instanceof Element;\n};\n\ndom.click = function(el, handler) {\n  dom.addEventListener(el, 'click', handler);\n};\n\ndom.once = function(el, type, handler) {\n  function handlerWrap() {\n    handler.apply(null, arguments);\n    dom.removeEventListener(el, type, handlerWrap);\n  }\n\n  dom.addEventListener(el, type, handlerWrap);\n};\n\n\n\n//Note: there is no getBoundingClientRect on iPad so we need a fallback\ndom.getDimension = function getDimension(element) {\n  var rect;\n\n  if(element.getBoundingClientRect) {\n    rect = element.getBoundingClientRect();\n    return {\n      width: rect.width,\n      height: rect.height\n    };\n  }\n\n  return {\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n};\n","var playerUtils = {};\n\n/**\n * Returns an object that captures the portions of player state relevant to\n * video playback. The result of this function can be passed to\n * restorePlayerSnapshot with a player to return the player to the state it\n * was in when this function was invoked.\n * @param {object} player The videojs player object\n */\nplayerUtils.getPlayerSnapshot = function getPlayerSnapshot(player) {\n  var tech = player.el().querySelector('.vjs-tech');\n  var snapshot = {\n    ended: player.ended(),\n    src: player.currentSrc(),\n    currentTime: player.currentTime(),\n    type: player.currentType(),\n    playing: !player.paused(),\n    suppressedTracks: getSuppressedTracks(player)\n  };\n\n  if (tech) {\n    snapshot.nativePoster = tech.poster;\n    snapshot.style = tech.getAttribute('style');\n  }\n\n  return snapshot;\n\n  /**** Local Functions ****/\n  function getSuppressedTracks(player) {\n    var tracks = player.remoteTextTracks ? player.remoteTextTracks() : [];\n\n    if (tracks && isArray(tracks.tracks_)) {\n      tracks = tracks.tracks_;\n    }\n\n    if (!isArray(tracks)) {\n      tracks = [];\n    }\n\n    var suppressedTracks = [];\n    tracks.forEach(function (track) {\n      suppressedTracks.push({\n        track: track,\n        mode: track.mode\n      });\n      track.mode = 'disabled';\n    });\n\n    return suppressedTracks;\n  }\n};\n\n/**\n * Attempts to modify the specified player so that its state is equivalent to\n * the state of the snapshot.\n * @param {object} snapshot - the player state to apply\n */\nplayerUtils.restorePlayerSnapshot = function restorePlayerSnapshot(player, snapshot) {\n  var tech = player.el().querySelector('.vjs-tech');\n  var attempts = 20; // the number of remaining attempts to restore the snapshot\n\n  if (snapshot.nativePoster) {\n    tech.poster = snapshot.nativePoster;\n  }\n\n  if ('style' in snapshot) {\n    // overwrite all css style properties to restore state precisely\n    tech.setAttribute('style', snapshot.style || '');\n  }\n\n  if (hasSrcChanged(player, snapshot)) {\n    // on ios7, fiddling with textTracks too early will cause safari to crash\n    player.one('contentloadedmetadata', restoreTracks);\n\n    // if the src changed for ad playback, reset it\n    player.src({src: snapshot.src, type: snapshot.type});\n\n    // safari requires a call to `load` to pick up a changed source\n    player.load();\n\n    // and then resume from the snapshots time once the original src has loaded\n    player.one('canplay', tryToResume);\n\n  } else {\n    restoreTracks();\n\n    if (snapshot.playing) {\n      player.play();\n    }\n  }\n\n  /*** Local Functions ***/\n\n  /**\n   * Determine whether the player needs to be restored to its state\n   * before ad playback began. With a custom ad display or burned-in\n   * ads, the content player state hasn't been modified and so no\n   * restoration is required\n   */\n  function hasSrcChanged(player, snapshot) {\n    if (player.src()) {\n      return player.src() !== snapshot.src;\n    }\n    // the player was configured through source element children\n    return player.currentSrc() !== snapshot.src;\n  }\n\n  function restoreTracks() {\n    var suppressedTracks = snapshot.suppressedTracks;\n    suppressedTracks.forEach(function (trackSnapshot) {\n      trackSnapshot.track.mode = trackSnapshot.mode;\n    });\n  }\n\n  /**\n   * Determine if the video element has loaded enough of the snapshot source\n   * to be ready to apply the rest of the state\n   */\n  function tryToResume() {\n    if (playerUtils.isReadyToResume(tech)) {\n      // if some period of the video is seekable, resume playback\n      return resume();\n    }\n\n    // delay a bit and then check again unless we're out of attempts\n    if (attempts--) {\n      setTimeout(tryToResume, 50);\n    } else {\n      (function () {\n        try {\n          resume();\n        } catch (e) {\n          videojs.log.warn('Failed to resume the content after an advertisement', e);\n        }\n      })();\n    }\n\n\n    /*** Local functions ***/\n    function resume() {\n      player.currentTime(snapshot.currentTime);\n\n      if (snapshot.playing) {\n        player.play();\n      }\n    }\n\n  }\n};\n\nplayerUtils.isReadyToResume = function (tech) {\n  if (tech.readyState > 1) {\n    // some browsers and media aren't \"seekable\".\n    // readyState greater than 1 allows for seeking without exceptions\n    return true;\n  }\n\n  if (tech.seekable === undefined) {\n    // if the tech doesn't expose the seekable time ranges, try to\n    // resume playback immediately\n    return true;\n  }\n\n  if (tech.seekable.length > 0) {\n    // if some period of the video is seekable, resume playback\n    return true;\n  }\n\n  return false;\n};\n\n//TODO: SHOULDN'T WE USE isIDevice utility function??\n/**\n * Returns true if the player is in an iphone\n */\nplayerUtils.isIPhone = (function () {\n  var iPhone = /(iPhone|iPod)/.test(navigator.userAgent);\n  return echoFn(iPhone);\n})();\n\n/**\n * This function prepares the player to display ads.\n * Adding convenience events like the 'vast.firsPlay' that gets fired when the video is first played\n * and ads the blackPoster to the player to prevent content from being displayed before the preroll ad.\n *\n * @param player\n */\nplayerUtils.prepareForAds = function (player) {\n  var blackPoster = player.addChild('blackPoster');\n  var firstPlay = true;\n  var volumeSnapshot;\n\n  /*\n   What I am doing below is ugly and horrible and I should think twice before calling myself a good developer. With that said,\n   it is the best solution I could find to mute the video until the 'play' event happens and the plugin can decide whether\n   to play the ad or not.\n\n   If you have a better solution please do tell me.\n   */\n  var origPlay = player.play;\n  player.play = function () {\n    if (isFirstPlay()) {\n      if (!playerUtils.isIPhone()) {\n        volumeSnapshot = saveVolumeSnapshot();\n        player.muted(true);\n      }\n    }\n    return origPlay.apply(this, arguments);\n  };\n\n\n  player.on('play', tryToTriggerFirstPlay);\n  player.on('loadStart', resetFirstPlay);//Every time we change the sources we reset the first play.\n  player.on('vast.reset', resetFirstPlay);//Every time we change the sources we reset the first play.\n  player.on('vast.firstPlay', restorePlayerToFirstPlay);\n  player.on('error', hideBlackPoster);//If there is an error in the player we remove the blackposter to show the err msg\n  player.on('vast.adStart', hideBlackPoster);\n  player.on('vast.adsCancel', hideBlackPoster);\n  player.on('vast.adStart', addStyles);\n  player.on('vast.adEnd', removeStyles);\n  player.on('vast.adsCancel', removeStyles);\n\n  /*** Local Functions ***/\n  function tryToTriggerFirstPlay() {\n    if (isFirstPlay()) {\n      firstPlay = false;\n      player.trigger('vast.firstPlay');\n\n    }\n  }\n\n  function resetFirstPlay() {\n    firstPlay = true;\n    blackPoster.show();\n  }\n\n  function isFirstPlay() {\n    return firstPlay;\n  }\n\n  function saveVolumeSnapshot() {\n    return {\n      muted: player.muted(),\n      volume: player.volume()\n    };\n  }\n\n  function restorePlayerToFirstPlay() {\n    if (!playerUtils.isIPhone()) {\n      player.currentTime(0);\n      restoreVolumeSnapshot(volumeSnapshot);\n    }\n  }\n\n  function restoreVolumeSnapshot(snapshot) {\n    if (isObject(snapshot)) {\n      player.volume(snapshot.volume);\n      player.muted(snapshot.muted);\n    }\n  }\n\n  function hideBlackPoster() {\n    if (!dom.hasClass(blackPoster.el(), 'vjs-hidden')) {\n      blackPoster.hide();\n    }\n  }\n\n  function addStyles() {\n    dom.addClass(player.el(), 'vjs-ad-playing');\n  }\n\n  function removeStyles() {\n    dom.removeClass(player.el(), 'vjs-ad-playing');\n  }\n};\n\n/**\n * Remove the poster attribute from the video element tech, if present. When\n * reusing a video element for multiple videos, the poster image will briefly\n * reappear while the new source loads. Removing the attribute ahead of time\n * prevents the poster from showing up between videos.\n * @param {object} player The videojs player object\n */\nplayerUtils.removeNativePoster = function (player) {\n  var tech = player.el().querySelector('.vjs-tech');\n  if (tech) {\n    tech.removeAttribute('poster');\n  }\n};\n\n/**\n * Helper function to listen to many events until one of them gets fired, then we\n * execute the handler and unsubscribe all the event listeners;\n *\n * @param player specific player from where to listen for the events\n * @param events array of events\n * @param handler function to execute once one of the events fires\n */\nplayerUtils.only = function only(player, events, handler) {\n  function listener() {\n    handler.apply(null, arguments);\n\n    events.forEach(function (event) {\n      player.off(event, listener);\n    });\n  }\n\n  events.forEach(function (event) {\n    player.on(event, listener);\n  });\n};","var xml = {};\n\nxml.strToXMLDoc = function strToXMLDoc(stringContainingXMLSource){\n  //IE 8\n  if(!DOMParser){\n    var xmlDocument = new ActiveXObject('Microsoft.XMLDOM');\n    xmlDocument.async = false;\n    xmlDocument.loadXML(stringContainingXMLSource);\n    return xmlDocument;\n  }\n\n  return parseString(stringContainingXMLSource);\n\n  function parseString(stringContainingXMLSource){\n    var parser = new DOMParser();\n    var parsedDocument;\n\n    //Note: This try catch is to deal with the fact that on IE parser.parseFromString does throw an error but the rest of the browsers don't.\n    try {\n      parsedDocument = parser.parseFromString(stringContainingXMLSource, \"application/xml\");\n\n      if(isParseError(parsedDocument) || isEmptyString(stringContainingXMLSource)){\n        throw new Error();\n      }\n    }catch(e){\n      throw new Error(\"xml.strToXMLDOC: Error parsing the string: '\" + stringContainingXMLSource + \"'\");\n    }\n\n    return parsedDocument;\n  }\n\n  function isParseError(parsedDocument) {\n    try { // parser and parsererrorNS could be cached on startup for efficiency\n      var parser = new DOMParser(),\n        errorneousParse = parser.parseFromString('INVALID', 'text/xml'),\n        parsererrorNS = errorneousParse.getElementsByTagName(\"parsererror\")[0].namespaceURI;\n\n      if (parsererrorNS === 'http://www.w3.org/1999/xhtml') {\n        // In PhantomJS the parseerror element doesn't seem to have a special namespace, so we are just guessing here :(\n        return parsedDocument.getElementsByTagName(\"parsererror\").length > 0;\n      }\n\n      return parsedDocument.getElementsByTagNameNS(parsererrorNS, 'parsererror').length > 0;\n    } catch (e) {\n      //Note on IE parseString throws an error by itself and it will never reach this code. Because it will have failed before\n    }\n  }\n};\n\nxml.parseText = function parseText (sValue) {\n  if (/^\\s*$/.test(sValue)) { return null; }\n  if (/^(?:true|false)$/i.test(sValue)) { return sValue.toLowerCase() === \"true\"; }\n  if (isFinite(sValue)) { return parseFloat(sValue); }\n  if (isISO8601(sValue)) { return new Date(sValue); }\n  return sValue.trim();\n};\n\nxml.JXONTree = function JXONTree (oXMLParent) {\n  var parseText = xml.parseText;\n\n  //The document object is an especial object that it may miss some functions or attrs depending on the browser.\n  //To prevent this problem with create the JXONTree using the root childNode which is a fully fleshed node on all supported\n  //browsers.\n  if(oXMLParent.documentElement){\n    return new xml.JXONTree(oXMLParent.documentElement);\n  }\n\n  if (oXMLParent.hasChildNodes()) {\n    var sCollectedTxt = \"\";\n    for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {\n      oNode = oXMLParent.childNodes.item(nItem);\n      /*jshint bitwise: false*/\n      if ((oNode.nodeType - 1 | 1) === 3) { sCollectedTxt += oNode.nodeType === 3 ? oNode.nodeValue.trim() : oNode.nodeValue; }\n      else if (oNode.nodeType === 1 && !oNode.prefix) {\n        sProp = decapitalize(oNode.nodeName);\n        vContent = new xml.JXONTree(oNode);\n        if (this.hasOwnProperty(sProp)) {\n          if (this[sProp].constructor !== Array) { this[sProp] = [this[sProp]]; }\n          this[sProp].push(vContent);\n        } else { this[sProp] = vContent; }\n      }\n    }\n    if (sCollectedTxt) { this.keyValue = parseText(sCollectedTxt); }\n  }\n\n  if (oXMLParent.hasAttributes()) {\n    var oAttrib;\n    for (var nAttrib = 0; nAttrib < oXMLParent.attributes.length; nAttrib++) {\n      oAttrib = oXMLParent.attributes.item(nAttrib);\n      this[\"@\" + decapitalize(oAttrib.name)] = parseText(oAttrib.value.trim());\n    }\n  }\n};\n\nxml.JXONTree.prototype.attr = function(attr) {\n  return this['@' + decapitalize(attr)];\n};\n\nxml.toJXONTree = function toJXONTree(xmlString){\n  var xmlDoc = xml.strToXMLDoc(xmlString);\n  return new xml.JXONTree(xmlDoc);\n};\n\n/**\n * Helper function to extract the keyvalue of a JXONTree obj\n *\n * @param xmlObj {JXONTree}\n * return the key value or undefined;\n */\nxml.keyValue = function getKeyValue(xmlObj) {\n  if(xmlObj){\n    return xmlObj.keyValue;\n  }\n  return undefined;\n};\n\nxml.attr = function getAttrValue(xmlObj, attr) {\n  if(xmlObj) {\n    return xmlObj['@' + decapitalize(attr)];\n  }\n  return undefined;\n};\n\nxml.encode = function encodeXML(str) {\n  return str.replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n};\n\nxml.decode = function decodeXML(str) {\n  return str.replace(/&apos;/g, \"'\")\n    .replace(/&quot;/g, '\"')\n    .replace(/&gt;/g, '>')\n    .replace(/&lt;/g, '<')\n    .replace(/&amp;/g, '&');\n};","vjs.plugin('vastClient', function VASTPlugin(options) {\n  var snapshot;\n  var player = this;\n  var vast = new VASTClient();\n  var adsCanceled = false;\n  var defaultOpts = {\n    // maximum amount of time in ms to wait to receive `adsready` from the ad\n    // implementation after play has been requested. Ad implementations are\n    // expected to load any dynamic libraries and make any requests to determine\n    // ad policies for a video during this time.\n    timeout: 500,\n\n    //TODO:finish this IOS FIX\n    //Whenever you play an add on IOS, the native player kicks in and we loose control of it. On very heavy pages the 'play' event\n    // May occur after the video content has already started. This is wrong if you want to play a preroll ad that needs to happen before the user\n    // starts watching the content. To prevent this usec\n    iosPrerollCancelTimeout: 2000,\n\n    // maximun amount of time for the ad to actually start playing. If this timeout gets\n    // triggered the ads will be cancelled\n    adCancelTimeout: 3000,\n\n    // Boolean flag that configures the player to play a new ad before the user sees the video again\n    // the current video\n    playAdAlways: false,\n\n    // Flag to enable or disable the ads by default.\n    adsEnabled: true,\n\n    // Boolean flag to enable or disable the resize with window.resize or orientationchange\n    autoResize: true,\n\n    // Path to the VPAID flash ad's loader\n    vpaidFlashLoaderPath: '/VPAIDFlash.swf'\n  };\n\n  var settings = extend({}, defaultOpts, options || {});\n\n  if (isString(settings.url)) {\n    settings.url = echoFn(settings.url);\n  }\n\n  if (!isDefined(settings.url)) {\n    return trackAdError(new VASTError('on VideoJS VAST plugin, missing url on options object'));\n  }\n\n  playerUtils.prepareForAds(player);\n  \n  if (settings.playAdAlways) {\n    // No matter what happens we play a new ad before the user sees the video again.\n    player.on('vast.contentEnd', function () {\n      setTimeout(function () {\n        player.trigger('vast.reset');\n      }, 0);\n    });\n  }\n\n  player.on('vast.firstPlay', tryToPlayPrerollAd);\n\n  player.on('vast.reset', cancelAds);\n\n  player.vast = {\n    isEnabled: function () {\n      return settings.adsEnabled;\n    },\n\n    enable: function () {\n      settings.adsEnabled = true;\n    },\n\n    disable: function () {\n      settings.adsEnabled = false;\n    }\n  };\n\n  return player.vast;\n\n  /**** Local functions ****/\n  function tryToPlayPrerollAd() {\n    //We remove the poster to prevent flickering whenever the content starts playing\n    playerUtils.removeNativePoster(player);\n    async.waterfall([\n      checkAdsEnabled,\n      preparePlayerForAd,\n      playPrerollAd\n    ], function (error, response) {\n      if (error) {\n        trackAdError(error, response);\n      } else {\n        player.trigger('vast.adEnd');\n      }\n\n      triggerContentEvents();\n\n      if(snapshot) {\n        playerUtils.restorePlayerSnapshot(player, snapshot);\n        snapshot = null;\n      }\n\n      if(player.vast && player.vast.adUnit) {\n        player.vast.adUnit = null; //We remove the adUnit\n      }\n    });\n\n    /*** Local functions ***/\n    function checkAdsEnabled(next) {\n      if(settings.adsEnabled) {\n       return next(null);\n      }\n      next(new VASTError('Ads are not enabled'));\n    }\n\n    function preparePlayerForAd(next) {\n      if (canPlayPrerollAd()) {\n        snapshot = playerUtils.getPlayerSnapshot(player);\n        player.pause();\n        addSpinnerIcon();\n        startAdCancelTimeout();\n        next(null);\n      } else {\n        next(new VASTError('video content has been playing before preroll ad'));\n      }\n    }\n\n    function triggerContentEvents() {\n      player.one('playing', function () {\n        player.trigger('vast.contentStart');\n\n        player.one('ended', function () {\n          player.trigger('vast.contentEnd');\n        });\n      });\n    }\n\n    function canPlayPrerollAd() {\n      return !playerUtils.isIPhone() || player.currentTime() <= settings.iosPrerollCancelTimeout;\n    }\n\n    function startAdCancelTimeout() {\n      var adCancelTimeoutId;\n      adsCanceled = false;\n\n      adCancelTimeoutId = setTimeout(function () {\n        trackAdError(new VASTError('timeout while waiting for the video to start playing', 402));\n      }, settings.adCancelTimeout);\n\n      playerUtils.only(player, ['vast.adStart', 'vast.adError', 'vast.adsCancel'], clearAdCancelTimeout);\n\n      /*** local functions ***/\n      function clearAdCancelTimeout() {\n        if (adCancelTimeoutId) {\n          clearTimeout(adCancelTimeoutId);\n          adCancelTimeoutId = null;\n        }\n      }\n    }\n\n    function addSpinnerIcon() {\n      dom.addClass(player.el(), 'vjs-vast-ad-loading');\n      playerUtils.only(player, ['vast.adStart', 'vast.adError', 'vast.adsCancel'], removeSpinnerIcon);\n    }\n\n    function removeSpinnerIcon() {\n      //IMPORTANT NOTE: We remove the spinnerIcon asynchronously to give time to the browser to start the video.\n      // If we remove it synchronously we see a flash of the content video before the ad starts playing.\n      setTimeout(function () {\n        dom.removeClass(player.el(), 'vjs-vast-ad-loading');\n      }, 100);\n    }\n\n  }\n\n  function cancelAds() {\n    player.trigger('vast.adsCancel');\n    adsCanceled = true;\n  }\n\n  function playPrerollAd(callback) {\n    async.waterfall([\n      getVastResponse,\n      playAd\n    ], callback);\n  }\n\n  function getVastResponse(callback) {\n    vast.getVASTResponse(settings.url(), callback);\n  }\n\n  function playAd(vastResponse, callback) {\n    //TODO: Find a better way to stop the play. The 'playPrerollWaterfall' ends in an inconsistent situation\n    //If the state is not 'preroll?' it means the ads were canceled therefore, we break the waterfall\n    if (adsCanceled) {\n      return;\n    }\n\n    var adIntegrator = isVPAID(vastResponse) ? new VPAIDIntegrator(player, settings) : new VASTIntegrator(player);\n    var adFinished = false;\n\n    player.vast.adUnit = adIntegrator.playAd(vastResponse, callback);\n\n    player.one('vast.adStart', adAdsLabel);\n    playerUtils.only(player, ['vast.adEnd', 'vast.adsCancel'], removeAdsLabel);\n\n    if (isIDevice()) {\n      preventManualProgress();\n    }\n\n    /*** Local functions ****/\n    function adAdsLabel() {\n      if (adFinished) {\n        return;\n      }\n      player.controlBar.addChild('AdsLabel');\n    }\n\n    function removeAdsLabel() {\n      player.controlBar.removeChild('AdsLabel');\n      adFinished = true;\n    }\n\n    function preventManualProgress() {\n      var PROGRESS_THRESHOLD = 1;\n      var previousTime = player.currentTime();\n      var tech = player.el().querySelector('.vjs-tech');\n      var skipad_attempts = 0;\n\n      player.on('timeupdate', adTimeupdateHandler);\n      playerUtils.only(player, ['vast.adEnd', 'vast.adsCancel'], stopPreventManualProgress);\n\n      /*** Local functions ***/\n      function adTimeupdateHandler() {\n        var currentTime = player.currentTime();\n        var progressDelta = Math.abs(currentTime - previousTime);\n\n        if (progressDelta > PROGRESS_THRESHOLD) {\n          skipad_attempts += 1;\n          if (skipad_attempts >= 2) {\n            player.pause();\n          }\n          player.currentTime(previousTime);\n        } else {\n          previousTime = currentTime;\n        }\n      }\n\n      function stopPreventManualProgress() {\n        player.off('timeupdate', adTimeupdateHandler);\n      }\n    }\n  }\n\n  function trackAdError(error, vastResponse) {\n    player.trigger({type: 'vast.adError', error: error});\n    cancelAds();\n    if (console && console.log) {\n      console.log('AD ERROR:', error.message, error, vastResponse);\n    }\n  }\n\n  function isVPAID(vastResponse) {\n    var i, len;\n    var mediaFiles = vastResponse.mediaFiles;\n    for (i = 0, len = mediaFiles.length; i < len; i++) {\n      if (vastUtil.isVPAID(mediaFiles[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n});\n\n","vjs.AdsLabel = vjs.Component.extend({\n  /** @constructor */\n  init: function (player, options) {\n    vjs.Component.call(this, player, options);\n\n    var that = this;\n\n    // We asynchronously reposition the ads label element\n    setTimeout(function () {\n      var currentTimeComp = player.controlBar &&( player.controlBar.getChild(\"timerControls\") || player.controlBar.getChild(\"currentTimeDisplay\") );\n      if(currentTimeComp) {\n        player.controlBar.el().insertBefore(that.el(), currentTimeComp.el());\n      }\n      dom.removeClass(that.el(), 'vjs-label-hidden');\n    }, 0);\n  }\n});\n\nvjs.AdsLabel.prototype.createEl = function(){\n  return vjs.Component.prototype.createEl.call(this, 'div', {\n    className: 'vjs-ads-label vjs-control vjs-label-hidden',\n    innerHTML: 'Advertisement'\n  });\n};","/**\n * The component that shows a black screen until the ads plugin has decided if it can or it can not play the ad.\n *\n * Note: In case you wonder why instead of this black poster we don't just show the spinner loader.\n *       IOS devices do not work well with animations and the browser chrashes from time to time That is why we chose to\n *       have a secondary black poster.\n *\n *       It also makes it much more easier for the users of the plugin since it does not change the default behaviour of the\n *       spinner and the player works the same way with and without the plugin.\n *\n * @param {vjs.Player|Object} player\n * @param {Object=} options\n * @constructor\n */\nvjs.BlackPoster = vjs.Component.extend({\n  /** @constructor */\n  init: function(player, options){\n    vjs.Component.call(this, player, options);\n\n    var posterImg = player.getChild('posterImage');\n\n    //We need to do it asynchronously to be sure that the black poster el is on the dom.\n    setTimeout(function() {\n      if(posterImg) {\n        player.el().insertBefore(this.el(), posterImg.el());\n      }\n    }.bind(this), 0);\n  }\n});\n\n/**\n * Create the black poster div element\n * @return {Element}\n */\nvjs.BlackPoster.prototype.createEl = function(){\n  return vjs.createEl('div', {\n    className: 'vjs-black-poster'\n  });\n};","(function (window) {\n  \"use strict\";\n\n\n  function VASTResponse() {\n    if (!(this instanceof VASTResponse)) {\n      return new VASTResponse();\n    }\n\n    this._linearAdded = false;\n    this.ads = [];\n    this.errorURLMacros = [];\n    this.impressions = [];\n    this.clickTrackings = [];\n    this.customClicks = [];\n    this.trackingEvents = {};\n    this.mediaFiles = [];\n    this.clickThrough = undefined;\n    this.adTitle = '';\n    this.duration = undefined;\n    this.skipoffset = undefined;\n  }\n\n  VASTResponse.prototype.addAd = function (ad) {\n    var inLine, wrapper;\n\n    if (ad instanceof Ad) {\n      inLine = ad.inLine;\n      wrapper = ad.wrapper;\n\n      this.ads.push(ad);\n\n      if (inLine) {\n        this._addInLine(inLine);\n      }\n\n      if (wrapper) {\n        this._addWrapper(wrapper);\n      }\n    }\n  };\n\n  VASTResponse.prototype._addErrorTrackUrl = function (error) {\n    var errorURL = error instanceof xml.JXONTree ? xml.keyValue(error) : error;\n    if (errorURL) {\n      this.errorURLMacros.push(errorURL);\n    }\n  };\n\n  VASTResponse.prototype._addImpressions = function (impressions) {\n    isArray(impressions) && appendToArray(this.impressions, impressions);\n  };\n\n  VASTResponse.prototype._addClickThrough = function (clickThrough) {\n    if (isNotEmptyString(clickThrough)) {\n      this.clickThrough = clickThrough;\n    }\n  };\n\n  VASTResponse.prototype._addClickTrackings = function (clickTrackings) {\n    isArray(clickTrackings) && appendToArray(this.clickTrackings, clickTrackings);\n  };\n\n  VASTResponse.prototype._addCustomClicks = function (customClicks) {\n    isArray(customClicks) && appendToArray(this.customClicks, customClicks);\n  };\n\n  VASTResponse.prototype._addTrackingEvents = function (trackingEvents) {\n    var eventsMap = this.trackingEvents;\n\n    if (trackingEvents) {\n      trackingEvents = isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n      trackingEvents.forEach(function (trackingEvent) {\n        if (!eventsMap[trackingEvent.name]) {\n          eventsMap[trackingEvent.name] = [];\n        }\n        eventsMap[trackingEvent.name].push(trackingEvent);\n      });\n    }\n  };\n\n  VASTResponse.prototype._addTitle = function (title) {\n    if (isNotEmptyString(title)) {\n      this.adTitle = title;\n    }\n  };\n\n  VASTResponse.prototype._addDuration = function (duration) {\n    if (isNumber(duration)) {\n      this.duration = duration;\n    }\n  };\n\n  VASTResponse.prototype._addVideoClicks = function (videoClicks) {\n    if (videoClicks instanceof VideoClicks) {\n      this._addClickThrough(videoClicks.clickThrough);\n      this._addClickTrackings(videoClicks.clickTrackings);\n      this._addCustomClicks(videoClicks.customClicks);\n    }\n  };\n\n  VASTResponse.prototype._addMediaFiles = function (mediaFiles) {\n    isArray(mediaFiles) && appendToArray(this.mediaFiles, mediaFiles);\n  };\n\n  VASTResponse.prototype._addSkipoffset = function (offset) {\n    if (offset) {\n      this.skipoffset = offset;\n    }\n  };\n\n  VASTResponse.prototype._addAdParameters = function (adParameters) {\n    if (adParameters) {\n      this.adParameters = adParameters;\n    }\n  };\n\n  VASTResponse.prototype._addLinear = function (linear) {\n    if (linear instanceof Linear) {\n      this._addDuration(linear.duration);\n      this._addTrackingEvents(linear.trackingEvents);\n      this._addVideoClicks(linear.videoClicks);\n      this._addMediaFiles(linear.mediaFiles);\n      this._addSkipoffset(linear.skipoffset);\n      this._addAdParameters(linear.adParameters);\n      this._linearAdded = true;\n    }\n  };\n\n  VASTResponse.prototype._addInLine = function (inLine) {\n    var that = this;\n\n    if (inLine instanceof InLine) {\n      this._addTitle(inLine.adTitle);\n      this._addErrorTrackUrl(inLine.error);\n      this._addImpressions(inLine.impressions);\n\n      inLine.creatives.forEach(function (creative) {\n        if (creative.linear) {\n          that._addLinear(creative.linear);\n        }\n      });\n    }\n  };\n\n  VASTResponse.prototype._addWrapper = function (wrapper) {\n    var that = this;\n\n    if (wrapper instanceof Wrapper) {\n      this._addErrorTrackUrl(wrapper.error);\n      this._addImpressions(wrapper.impressions);\n\n      wrapper.creatives.forEach(function (creative) {\n        var linear = creative.linear;\n        if (linear) {\n          that._addVideoClicks(linear.videoClicks);\n          that.clickThrough = undefined;//We ensure that no clickThrough has been added\n          that._addTrackingEvents(linear.trackingEvents);\n        }\n      });\n    }\n  };\n\n  VASTResponse.prototype.hasLinear = function(){\n    return this._linearAdded;\n  };\n\n  function appendToArray(array, items) {\n    items.forEach(function (item) {\n      array.push(item);\n    });\n  }\n\n  window.VASTResponse = VASTResponse;\n})(window);\n","\"use strict\";\n\nvar vastUtil = {\n\n  track: function track(URLMacros, variables) {\n    var sources = vastUtil.parseURLMacros(URLMacros, variables);\n    var trackImgs = [];\n    sources.forEach(function (src) {\n      var img = new Image();\n      img.src = src;\n      trackImgs.push(img);\n    });\n    return trackImgs;\n  },\n\n  parseURLMacros: function parseMacros(URLMacros, variables) {\n    var parsedURLs = [];\n\n    variables = variables || {};\n\n    if (!(variables[\"CACHEBUSTING\"])) {\n      variables[\"CACHEBUSTING\"] = Math.round(Math.random() * 1.0e+10);\n    }\n\n    URLMacros.forEach(function (URLMacro) {\n      parsedURLs.push(vastUtil._parseURLMacro(URLMacro, variables));\n    });\n\n    return parsedURLs;\n  },\n\n  parseURLMacro: function parseMacro(URLMacro, variables) {\n    variables = variables || {};\n\n    if (!(variables[\"CACHEBUSTING\"])) {\n      variables[\"CACHEBUSTING\"] = Math.round(Math.random() * 1.0e+10);\n    }\n\n    return vastUtil._parseURLMacro(URLMacro, variables);\n  },\n\n  _parseURLMacro: function parseMacro(URLMacro, variables) {\n    variables = variables || {};\n\n    forEach(variables, function (value, key) {\n      URLMacro = URLMacro.replace(new RegExp(\"\\\\[\" + key + \"\\\\\\]\", 'gm'), value);\n    });\n\n    return URLMacro;\n  },\n\n  parseDuration: function parseDuration(durationStr) {\n    var durationRegex = /(\\d\\d):(\\d\\d):(\\d\\d)(\\.(\\d\\d\\d))?/;\n    var match, durationInMs;\n\n    if (isString(durationStr)) {\n      match = durationStr.match(durationRegex);\n      if (match) {\n        durationInMs = parseHoursToMs(match[1]) + parseMinToMs(match[2]) + parseSecToMs(match[3]) + parseInt(match[5] || 0);\n      }\n    }\n\n    return isNaN(durationInMs) ? null : durationInMs;\n\n    /*** local functions ***/\n    function parseHoursToMs(hourStr) {\n      return parseInt(hourStr) * 60 * 60 * 1000;\n    }\n\n    function parseMinToMs(minStr) {\n      return parseInt(minStr) * 60 * 1000;\n    }\n\n    function parseSecToMs(secStr) {\n      return parseInt(secStr) * 1000;\n    }\n  },\n\n  parseImpressions: function parseImpressions(impressions) {\n    if (impressions) {\n      impressions = isArray(impressions) ? impressions : [impressions];\n      return transformArray(impressions, function (impression) {\n        if (isNotEmptyString(impression.keyValue)) {\n          return impression.keyValue;\n        }\n        return undefined;\n      });\n    }\n    return [];\n  },\n\n  parseCreatives: function parseCreatives(creativesJTree) {\n    var creatives = [];\n    var creativesData;\n    if (isDefined(creativesJTree) && isDefined(creativesJTree.creative)) {\n      creativesData = isArray(creativesJTree.creative) ? creativesJTree.creative : [creativesJTree.creative];\n      creativesData.forEach(function (creative) {\n        creatives.push(new Creative(creative));\n      });\n    }\n    return creatives;\n  },\n\n  //We assume that the progress is going to arrive in milliseconds\n  formatProgress: function formatProgress(progress) {\n    var hours, minutes, seconds, milliseconds;\n    hours = progress / (60 * 60 * 1000);\n    hours = Math.floor(hours);\n    minutes = (progress / (60 * 1000)) % 60;\n    minutes = Math.floor(minutes);\n    seconds = (progress / 1000) % 60;\n    seconds = Math.floor(seconds);\n    milliseconds = progress % 1000;\n    return toFixedDigits(hours, 2) + ':' + toFixedDigits(minutes, 2) + ':' + toFixedDigits(seconds, 2) + '.' + toFixedDigits(milliseconds, 3);\n  },\n\n  parseOffset:   function parseOffset(offset, duration) {\n    if(isPercentage(offset)){\n      return calculatePercentage(offset, duration);\n    }\n    return vastUtil.parseDuration(offset);\n\n    /*** Local function ***/\n    function isPercentage(offset) {\n      var percentageRegex = /^\\d+(\\.\\d+)?%$/g;\n      return percentageRegex.test(offset);\n    }\n\n    function calculatePercentage(percentStr, duration) {\n      if(duration) {\n        return calcPercent(duration, parseFloat(percentStr.replace('%', '')));\n      }\n      return null;\n    }\n\n    function calcPercent(quantity, percent){\n      return quantity * percent / 100;\n    }\n  },\n\n  isVPAID: function isVPAIDMediaFile(mediaFile) {\n    return !!mediaFile && mediaFile.apiFramework === 'VPAID';\n  }\n};"],"sourceRoot":"/source/"}